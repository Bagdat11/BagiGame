<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ö–∞–π—Ä–∞—Ç | –°–µ–∑—ñ–º–¥—ñ–∫ –∫”©–º–µ–∫—à—ñ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .settings-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.8rem;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .settings-icon:hover {
            transform: rotate(45deg);
        }

        .language-switcher {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .lang-btn {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: #4a90e2;
            font-weight: bold;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .status {
            font-size: 1.2rem;
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        .main-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .menu-item:hover {
            transform: translateY(-5px);
            background: rgba(0, 0, 0, 0.4);
        }

        .menu-item h2 {
            margin-bottom: 15px;
            font-size: 1.8rem;
        }

        .menu-item p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∏–≥—Ä */
        .game-section {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-btn {
            padding: 10px 20px;
            background: #e74c3c;
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
        }

        /* –û–±—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä */
        .game-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .number {
            height: 140px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 3rem;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .number:hover {
            transform: scale(1.05);
        }

        .number-1 {
            background: linear-gradient(135deg, #ff9966, #ff5e62);
        }

        .number-2 {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }

        .number-3 {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
        }

        .number-4 {
            background: linear-gradient(135deg, #FFC107, #FF9800);
        }

        .number-5 {
            background: linear-gradient(135deg, #9C27B0, #673AB7);
        }

        .number-6 {
            background: linear-gradient(135deg, #795548, #607D8B);
        }

        .round-info {
            text-align: center;
            margin: 20px 0;
            font-size: 1.5rem;
            font-weight: bold;
        }

        /* –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ */
        .math-problem {
            font-size: 2rem;
            text-align: center;
            margin: 20px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .math-input {
            width: 100%;
            padding: 15px;
            font-size: 1.5rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: white;
            margin-bottom: 20px;
        }

        /* –ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ" */
        .guess-input {
            width: 100%;
            padding: 15px;
            font-size: 1.5rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: white;
            margin-bottom: 20px;
        }

        .guess-feedback {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 20px;
            min-height: 60px;
        }

        /* –ò–≥—Ä–∞ –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É */
        .motor-game-container {
            position: relative;
            height: 400px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }

        .target {
            position: absolute;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ff5e62, #b21f1f);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(255, 94, 98, 0.7);
            transition: transform 0.2s;
        }

        .target:hover {
            transform: scale(1.1);
        }

        .motor-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .motor-stats {
            display: flex;
            gap: 20px;
        }

        .stat {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.2rem;
        }

        /* –ù–∞—Å—Ç—Ä–æ–π–∫–∏ */
        .settings-section {
            display: none;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .settings-group {
            margin-bottom: 25px;
        }

        .settings-group h3 {
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .voice-select {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 1rem;
            margin-bottom: 15px;
        }

        .slider-container {
            margin-bottom: 20px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .slider {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            border-radius: 5px;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4a90e2;
            cursor: pointer;
        }

        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.2);
            transition: .4s;
            border-radius: 30px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #4a90e2;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        .results {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .results h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 2rem;
        }

        .mood-result, .job-result {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            background: #4a90e2;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        button:hover {
            background: #357ae8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .voice-btn {
            background: #e74c3c;
        }

        .voice-btn:hover {
            background: #c0392b;
        }

        .mute-btn {
            background: #9b59b6;
        }

        .mute-btn:hover {
            background: #8e44ad;
        }

        .listening .voice-btn {
            animation: pulse 1.5s infinite;
            background: #27ae60;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        .pulse {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .hidden {
            display: none;
        }

        /* –ù–æ–≤—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π */
        /* –®–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
        .settings-icon {
            font-size: 24px;
            cursor: pointer;
        }

        /* –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ */
        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .difficulty-btn {
            padding: 10px 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.2);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn.active {
            background: #4a90e2;
            border-color: #4a90e2;
        }

        /* –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ */
        .leaderboard {
            margin-top: 30px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .leaderboard h3 {
            text-align: center;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* –ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º */
        .profession-game {
            text-align: center;
            margin: 20px 0;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
            text-align: left;
            font-family: monospace;
            min-height: 150px;
        }

        .code-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .code-option {
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .code-option:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* –ò–≥—Ä–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞ */
        .designer-game {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .color-palette {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .color-box {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .color-box:hover {
            transform: scale(1.1);
        }

        .design-container {
            width: 100%;
            height: 300px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            display: flex;
            flex-wrap: wrap;
            padding: 15px;
            gap: 10px;
        }

        .design-element {
            padding: 10px;
            border-radius: 5px;
            cursor: move;
            user-select: none;
        }

        /* –ò–≥—Ä–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞ */
        .engineer-game {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .engineer-parts {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 20px;
        }

        .engineer-part {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .engineer-part:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }

        .engineer-canvas {
            width: 100%;
            height: 300px;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            position: relative;
        }

        .constructed-item {
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* –ü–æ–¥—Å–∫–∞–∑–∫–∏ */
        .hints-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
        }

        .hint-btn {
            padding: 10px 15px;
            background: #9b59b6;
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
        }

        .hint-btn:disabled {
            background: #7d3c98;
            cursor: not-allowed;
        }

        /* –ö–∞–º–µ—Ä–∞ –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü */
        .camera-section {
            margin: 20px 0;
            text-align: center;
        }

        .camera-container {
            position: relative;
            width: 100%;
            max-width: 640px;
            margin: 0 auto;
        }

        #video {
            width: 100%;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.2);
        }

        #canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .face-info {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        /* –ú–∏–∫—Ä–æ—Ñ–æ–Ω */
        .permission-granted {
            background: #27ae60 !important;
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è */
        @media (max-width: 768px) {
            .main-menu {
                grid-template-columns: 1fr;
            }

            .game-container {
                grid-template-columns: repeat(3, 1fr);
            }

            .number {
                height: 120px;
                font-size: 2.5rem;
            }

            .motor-game-container {
                height: 300px;
            }

            .motor-stats {
                flex-direction: column;
                gap: 10px;
            }

            .controls {
                flex-direction: column;
            }

            button {
                width: 100%;
            }

            .game-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .back-btn {
                align-self: flex-end;
            }

            .difficulty-selector {
                flex-direction: column;
            }

            .code-options {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
                padding: 0 40px;
            }

            .settings-icon {
                top: 15px;
                right: 15px;
            }

            .color-palette {
                flex-wrap: wrap;
                justify-content: center;
            }

            .engineer-parts {
                gap: 10px;
            }

            .engineer-part {
                width: 70px;
                height: 70px;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 10px;
            }

            header {
                padding: 15px;
            }

            .menu-item {
                padding: 20px;
            }

            .menu-item h2 {
                font-size: 1.5rem;
            }

            .math-problem {
                font-size: 1.5rem;
            }

            .number {
                height: 100px;
                font-size: 2rem;
            }

            .motor-game-container {
                height: 250px;
            }

            .engineer-part {
                width: 60px;
                height: 60px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="language-switcher">
                <button id="lang-ru" class="lang-btn active">–†—É—Å—Å–∫–∏–π</button>
                <button id="lang-kk" class="lang-btn">“ö–∞–∑–∞“õ—à–∞</button>
            </div>
            <i class="fas fa-cog settings-icon" id="settings-icon"></i>
            <h1 id="main-title">–ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ö–∞–π—Ä–∞—Ç</h1>
            <div class="status" id="status">–°–∫–∞–∂–∏—Ç–µ "–ö–∞–π—Ä–∞—Ç" –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</div>
            <div class="controls">
                <button id="voice-btn" class="voice-btn">–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                <button id="mute-btn" class="mute-btn">–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>
                <button id="camera-btn" class="mute-btn">–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É</button>
            </div>
        </header>

        <!-- –°–µ–∫—Ü–∏—è –∫–∞–º–µ—Ä—ã -->
        <div class="camera-section hidden" id="camera-section">
            <h2>–†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü</h2>
            <div class="camera-container">
                <video id="video" width="640" height="480" autoplay muted></video>
                <canvas id="canvas" width="640" height="480"></canvas>
            </div>
            <div class="face-info" id="face-info">
                –ö–∞–º–µ—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞. –ù–∞–∂–º–∏—Ç–µ "–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É" –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è.
            </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div class="main-menu" id="main-menu">
            <div class="menu-item" data-game="future">
                <h2 id="game1-title">–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ</h2>
                <p id="game1-desc">–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é</p>
            </div>
            <div class="menu-item" data-game="math">
                <h2 id="game2-title">–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫</h2>
                <p id="game2-desc">–†–µ—à–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é –ö–∞–π—Ä–∞—Ç–∞</p>
            </div>
            <div class="menu-item" data-game="guess">
                <h2 id="game3-title">–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</h2>
                <p id="game3-desc">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100 —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –ö–∞–π—Ä–∞—Ç–∞</p>
            </div>
            <div class="menu-item" data-game="motor">
                <h2 id="game4-title">–†–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏</h2>
                <p id="game4-desc">–¢—Ä–µ–Ω–∏—Ä—É–π—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –∏ –º–æ—Ç–æ—Ä–∏–∫—É</p>
            </div>
            <div class="menu-item" data-game="profession">
                <h2 id="game5-title">–ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</h2>
                <p id="game5-desc">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–±—è –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏—è—Ö</p>
            </div>
        </div>

        <!-- –ò–≥—Ä–∞ 1: –û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ -->
        <div class="game-section" id="game-future">
            <div class="game-header">
                <h2 id="future-title">–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ</h2>
                <button class="back-btn" id="back-from-future">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="round-info" id="round-info">–†–∞—É–Ω–¥ 1 –∏–∑ 6</div>
            <div class="game-container">
                <div class="number number-1" data-number="1">1</div>
                <div class="number number-1" data-number="2">2</div>
                <div class="number number-1" data-number="3">3</div>
            </div>
            <div class="results hidden" id="future-results">
                <h2 id="results-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞</h2>
                <div class="mood-result" id="mood-result">–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</div>
                <div class="job-result" id="job-result">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ä–∞–±–æ—Ç–∞: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è...</div>
                <div class="controls">
                    <button id="try-profession">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é</button>
                </div>
            </div>
        </div>

        <!-- –ò–≥—Ä–∞ 2: –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ -->
        <div class="game-section" id="game-math">
            <div class="game-header">
                <h2 id="math-title">–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫</h2>
                <button class="back-btn" id="back-from-math">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="difficulty-selector">
                <button class="difficulty-btn active" data-difficulty="easy">–õ–µ–≥–∫–∏–π</button>
                <button class="difficulty-btn" data-difficulty="medium">–°—Ä–µ–¥–Ω–∏–π</button>
                <button class="difficulty-btn" data-difficulty="hard">–°–ª–æ–∂–Ω—ã–π</button>
            </div>
            <div class="math-problem" id="math-problem">5 + 3 = ?</div>
            <input type="number" class="math-input" id="math-answer" placeholder="–í–≤–µ–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç">
            <div class="controls">
                <button id="check-math">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                <button id="voice-math">–û—Ç–≤–µ—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–º</button>
                <button id="new-math">–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞</button>
            </div>
            <div class="results hidden" id="math-results">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
                <div class="mood-result" id="math-result">–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞...</div>
            </div>
            <div class="leaderboard hidden" id="math-leaderboard">
                <h3>–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h3>
                <div id="math-scores"></div>
            </div>
        </div>

        <!-- –ò–≥—Ä–∞ 3: –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ -->
        <div class="game-section" id="game-guess">
            <div class="game-header">
                <h2 id="guess-title">–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</h2>
                <button class="back-btn" id="back-from-guess">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="guess-feedback" id="guess-feedback">
                –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100. –ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å!
            </div>
            <input type="number" class="guess-input" id="guess-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100">
            <div class="controls">
                <button id="check-guess">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                <button id="voice-guess">–°–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ</button>
                <button id="new-game">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
            </div>
        </div>

        <!-- –ò–≥—Ä–∞ 4: –†–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏ -->
        <div class="game-section" id="game-motor">
            <div class="game-header">
                <h2 id="motor-title">–†–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏</h2>
                <button class="back-btn" id="back-from-motor">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="difficulty-selector">
                <button class="difficulty-btn active" data-difficulty="easy">–õ–µ–≥–∫–∏–π</button>
                <button class="difficulty-btn" data-difficulty="medium">–°—Ä–µ–¥–Ω–∏–π</button>
                <button class="difficulty-btn" data-difficulty="hard">–°–ª–æ–∂–Ω—ã–π</button>
            </div>
            <div class="motor-controls">
                <div class="motor-stats">
                    <div class="stat" id="score">–û—á–∫–∏: 0</div>
                    <div class="stat" id="time">–í—Ä–µ–º—è: 30</div>
                    <div class="stat" id="targets">–¶–µ–ª–∏: 0</div>
                </div>
                <button id="start-motor">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </div>
            <div class="motor-game-container" id="motor-game-container"></div>
            <div class="results hidden" id="motor-results">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
                <div class="mood-result" id="final-score">–ù–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤: 0</div>
                <div class="job-result" id="accuracy">–¢–æ—á–Ω–æ—Å—Ç—å: 0%</div>
            </div>
            <div class="leaderboard hidden" id="motor-leaderboard">
                <h3>–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤</h3>
                <div id="motor-scores"></div>
            </div>
        </div>

        <!-- –ò–≥—Ä–∞ 5: –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ -->
        <div class="game-section" id="game-profession">
            <div class="game-header">
                <h2 id="profession-title">–ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</h2>
                <button class="back-btn" id="back-from-profession">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="profession-game">
                <div id="profession-description">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –Ω–µ–π!</p>
                </div>
                <div class="game-container">
                    <div class="menu-item" data-profession="programmer">
                        <h3>–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç</h3>
                        <p>–°–æ–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥</p>
                    </div>
                    <div class="menu-item" data-profession="engineer">
                        <h3>–ò–Ω–∂–µ–Ω–µ—Ä</h3>
                        <p>–°–æ–±–µ—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º</p>
                    </div>
                    <div class="menu-item" data-profession="designer">
                        <h3>–î–∏–∑–∞–π–Ω–µ—Ä</h3>
                        <p>–°–æ–∑–¥–∞–π –∫—Ä–∞—Å–∏–≤—ã–π –¥–∏–∑–∞–π–Ω</p>
                    </div>
                </div>
                
                <!-- –ò–≥—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ -->
                <div id="programmer-game" class="hidden">
                    <div class="game-header">
                        <h2>–ò–≥—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞</h2>
                        <button class="back-btn" id="back-from-programmer">–ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</button>
                    </div>
                    <div class="code-block" id="code-block">
                        // –í–∞—à –∫–æ–¥ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å
                    </div>
                    <div class="hints-container">
                        <button class="hint-btn" id="hint-1">–ü–æ–¥—Å–∫–∞–∑–∫–∞ 1</button>
                        <button class="hint-btn" id="hint-2">–ü–æ–¥—Å–∫–∞–∑–∫–∞ 2</button>
                        <button class="hint-btn" id="hint-3">–ü–æ–¥—Å–∫–∞–∑–∫–∞ 3</button>
                    </div>
                    <div class="code-options" id="code-options">
                        <div class="code-option" data-option="1">console.log("Hello World");</div>
                        <div class="code-option" data-option="2">function test() { return true; }</div>
                        <div class="code-option" data-option="3">for (let i = 0; i < 5; i++) { }</div>
                        <div class="code-option" data-option="4">if (x > 10) { return; }</div>
                    </div>
                    <div class="controls">
                        <button id="check-code">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                        <button id="reset-code">–°–±—Ä–æ—Å–∏—Ç—å</button>
                    </div>
                    <div class="results hidden" id="programmer-results">
                        <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
                        <div class="mood-result" id="programmer-score">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0%</div>
                        <div class="job-result" id="programmer-feedback">–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏...</div>
                    </div>
                </div>
                
                <!-- –ò–≥—Ä–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞ -->
                <div id="engineer-game" class="hidden">
                    <div class="game-header">
                        <h2>–ò–≥—Ä–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞</h2>
                        <button class="back-btn" id="back-from-engineer">–ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</button>
                    </div>
                    <div class="engineer-game">
                        <div id="engineer-description">
                            <h3>–°–æ–±–µ—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º –∏–∑ –¥–µ—Ç–∞–ª–µ–π</h3>
                            <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –¥–µ—Ç–∞–ª–∏ –Ω–∞ —Ä–∞–±–æ—á—É—é –æ–±–ª–∞—Å—Ç—å –∏ —Å–æ–±–µ—Ä–∏—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º</p>
                        </div>
                        <div class="engineer-parts" id="engineer-parts">
                            <div class="engineer-part" data-part="gear">‚öôÔ∏è</div>
                            <div class="engineer-part" data-part="spring">ü¶Ω</div>
                            <div class="engineer-part" data-part="wheel">üõû</div>
                            <div class="engineer-part" data-part="lever">üéöÔ∏è</div>
                            <div class="engineer-part" data-part="piston">üî©</div>
                        </div>
                        <div class="engineer-canvas" id="engineer-canvas"></div>
                        <div class="controls">
                            <button id="check-construction">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é</button>
                            <button id="reset-construction">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        </div>
                        <div class="results hidden" id="engineer-results">
                            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
                            <div class="mood-result" id="engineer-score">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0%</div>
                            <div class="job-result" id="engineer-feedback">–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏...</div>
                        </div>
                    </div>
                </div>
                
                <!-- –ò–≥—Ä–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞ -->
                <div id="designer-game" class="hidden">
                    <div class="game-header">
                        <h2>–ò–≥—Ä–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞</h2>
                        <button class="back-btn" id="back-from-designer">–ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º</button>
                    </div>
                    <div class="designer-game">
                        <div id="designer-description">
                            <h3>–°–æ–∑–¥–∞–π—Ç–µ —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É</h3>
                            <p>–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç–∞ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—É—é –ø–∞–ª–∏—Ç—Ä—É</p>
                        </div>
                        <div class="color-palette" id="color-palette">
                            <div class="color-box" style="background: #ff5e62;" data-color="#ff5e62"></div>
                            <div class="color-box" style="background: #4CAF50;" data-color="#4CAF50"></div>
                            <div class="color-box" style="background: #2196F3;" data-color="#2196F3"></div>
                            <div class="color-box" style="background: #FFC107;" data-color="#FFC107"></div>
                            <div class="color-box" style="background: #9C27B0;" data-color="#9C27B0"></div>
                        </div>
                        <div class="design-container" id="design-container">
                            <div class="design-element" style="background: rgba(255,255,255,0.2);">–¢–µ–∫—Å—Ç</div>
                            <div class="design-element" style="background: rgba(255,255,255,0.2);">–ö–Ω–æ–ø–∫–∞</div>
                            <div class="design-element" style="background: rgba(255,255,255,0.2);">–§–æ–Ω</div>
                        </div>
                        <div class="controls">
                            <button id="check-design">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∏–∑–∞–π–Ω</button>
                            <button id="reset-design">–°–±—Ä–æ—Å–∏—Ç—å</button>
                        </div>
                        <div class="results hidden" id="designer-results">
                            <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</h2>
                            <div class="mood-result" id="designer-score">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 0%</div>
                            <div class="job-result" id="designer-feedback">–û–∂–∏–¥–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div class="settings-section" id="settings-section">
            <div class="settings-header">
                <h2 id="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞</h2>
                <button class="back-btn" id="back-from-settings">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
            </div>
            <div class="settings-group">
                <h3>–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞</h3>
                <select id="voice-select" class="voice-select">
                    <option value="">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>
                </select>
            </div>
            <div class="settings-group">
                <h3>–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏</h3>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>–ú–µ–¥–ª–µ–Ω–Ω–æ</span>
                        <span id="speed-value">1.0</span>
                        <span>–ë—ã—Å—Ç—Ä–æ</span>
                    </div>
                    <input type="range" min="0.5" max="2" step="0.1" value="1" class="slider" id="speed-slider">
                </div>
            </div>
            <div class="settings-group">
                <h3>–í—ã—Å–æ—Ç–∞ —Ç–æ–Ω–∞</h3>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>–ù–∏–∑–∫–∏–π</span>
                        <span id="pitch-value">1.0</span>
                        <span>–í—ã—Å–æ–∫–∏–π</span>
                    </div>
                    <input type="range" min="0.5" max="2" step="0.1" value="1" class="slider" id="pitch-slider">
                </div>
            </div>
            <div class="settings-group">
                <h3>–ì—Ä–æ–º–∫–æ—Å—Ç—å</h3>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>–¢–∏—Ö–∏–π</span>
                        <span id="volume-value">1.0</span>
                        <span>–ì—Ä–æ–º–∫–∏–π</span>
                    </div>
                    <input type="range" min="0" max="1" step="0.1" value="1" class="slider" id="volume-slider">
                </div>
            </div>
            <div class="settings-group">
                <h3>–î—Ä—É–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</h3>
                <div class="slider-container" style="display: flex; align-items: center; justify-content: space-between;">
                    <span>–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="continuous-recognition" checked>
                        <span class="toggle-slider"></span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü -->
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
            const statusDiv = document.getElementById('status');
            const mainMenu = document.getElementById('main-menu');
            const gameFuture = document.getElementById('game-future');
            const gameMath = document.getElementById('game-math');
            const gameGuess = document.getElementById('game-guess');
            const gameMotor = document.getElementById('game-motor');
            const gameProfession = document.getElementById('game-profession');
            const settingsSection = document.getElementById('settings-section');
            const voiceBtn = document.getElementById('voice-btn');
            const muteBtn = document.getElementById('mute-btn');
            const cameraBtn = document.getElementById('camera-btn');
            const cameraSection = document.getElementById('camera-section');
            const langRuBtn = document.getElementById('lang-ru');
            const langKkBtn = document.getElementById('lang-kk');
            const mainTitle = document.getElementById('main-title');
            const settingsIcon = document.getElementById('settings-icon');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–∞–º–µ—Ä–æ–π
            const video = document.getElementById('video');
            const canvas = document.getElementById('canvas');
            const faceInfo = document.getElementById('face-info');
            const ctx = canvas.getContext('2d');

            // –ö–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
            const backFromFuture = document.getElementById('back-from-future');
            const backFromMath = document.getElementById('back-from-math');
            const backFromGuess = document.getElementById('back-from-guess');
            const backFromMotor = document.getElementById('back-from-motor');
            const backFromProfession = document.getElementById('back-from-profession');
            const backFromSettings = document.getElementById('back-from-settings');
            const backFromProgrammer = document.getElementById('back-from-programmer');
            const backFromEngineer = document.getElementById('back-from-engineer');
            const backFromDesigner = document.getElementById('back-from-designer');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –º–µ–Ω—é
            const menuItems = document.querySelectorAll('.menu-item');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
            const voiceSelect = document.getElementById('voice-select');
            const speedSlider = document.getElementById('speed-slider');
            const pitchSlider = document.getElementById('pitch-slider');
            const volumeSlider = document.getElementById('volume-slider');
            const speedValue = document.getElementById('speed-value');
            const pitchValue = document.getElementById('pitch-value');
            const volumeValue = document.getElementById('volume-value');
            const continuousRecognition = document.getElementById('continuous-recognition');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä—ã –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
            const motorGameContainer = document.getElementById('motor-game-container');
            const startMotorBtn = document.getElementById('start-motor');
            const scoreElement = document.getElementById('score');
            const timeElement = document.getElementById('time');
            const targetsElement = document.getElementById('targets');
            const motorResults = document.getElementById('motor-results');
            const finalScoreElement = document.getElementById('final-score');
            const accuracyElement = document.getElementById('accuracy');
            const motorLeaderboard = document.getElementById('motor-leaderboard');
            const motorScores = document.getElementById('motor-scores');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞
            const mathLeaderboard = document.getElementById('math-leaderboard');
            const mathScores = document.getElementById('math-scores');

            // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–≥—Ä—ã –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
            const professionGameContainer = document.getElementById('profession-game-container');
            const programmerGame = document.getElementById('programmer-game');
            const engineerGame = document.getElementById('engineer-game');
            const designerGame = document.getElementById('designer-game');
            const codeBlock = document.getElementById('code-block');
            const codeOptions = document.getElementById('code-options');
            const checkCodeBtn = document.getElementById('check-code');
            const resetCodeBtn = document.getElementById('reset-code');
            const tryProfessionBtn = document.getElementById('try-profession');
            const hintButtons = [
                document.getElementById('hint-1'),
                document.getElementById('hint-2'),
                document.getElementById('hint-3')
            ];

            // –≠–ª–µ–º–µ–Ω—Ç—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∏–Ω–∏-–∏–≥—Ä
            const programmerResults = document.getElementById('programmer-results');
            const programmerScore = document.getElementById('programmer-score');
            const programmerFeedback = document.getElementById('programmer-feedback');
            const engineerResults = document.getElementById('engineer-results');
            const engineerScore = document.getElementById('engineer-score');
            const engineerFeedback = document.getElementById('engineer-feedback');
            const designerResults = document.getElementById('designer-results');
            const designerScore = document.getElementById('designer-score');
            const designerFeedback = document.getElementById('designer-feedback');

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            let recognition;
            let synthesis;
            let currentLanguage = 'ru';
            let isActivated = false;
            let isListening = false;
            let currentGame = null;
            let isMuted = false;
            let microphonePermissionGranted = false;
            let cameraActive = false;
            let faceDetectionInterval;

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä
            let futureNumbers = [];
            let currentRound = 1;
            let mathAnswer = 0;
            let mathDifficulty = 'easy';
            let mathScore = 0;
            let guessNumber = 0;
            let guessAttempts = 0;

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
            let motorScore = 0;
            let motorTargets = 0;
            let motorTime = 30;
            let motorDifficulty = 'easy';
            let motorTimer;
            let targetsClicked = 0;

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –∏–≥—Ä—ã –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
            let currentProfession = null;
            let codePieces = [];
            let correctCode = [];
            let hintsUsed = 0;
            let maxHints = 3;
            let professionScores = {
                'programmer': 0,
                'engineer': 0,
                'designer': 0
            };

            // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü
            let faceDetectionOptions;
            let lastFaceDetection = 0;
            let faceDetectionCooldown = 1000; // 1 —Å–µ–∫—É–Ω–¥–∞ –º–µ–∂–¥—É –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è–º–∏

            // –¶–≤–µ—Ç–∞ –¥–ª—è —Ä–∞—É–Ω–¥–æ–≤ –∏–≥—Ä—ã "–ë—É–¥—É—â–µ–µ"
            const roundColors = ['number-1', 'number-2', 'number-3', 'number-4', 'number-5', 'number-6'];

            // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
            const translations = {
                ru: {
                    mainTitle: "–ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ö–∞–π—Ä–∞—Ç",
                    statusWaiting: "–°–∫–∞–∂–∏—Ç–µ '–ö–∞–π—Ä–∞—Ç' –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏",
                    statusListening: "–°–ª—É—à–∞—é...",
                    statusProcessing: "–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é...",
                    statusActivated: "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ì–æ–≤–æ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã",
                    activateVoice: "–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ",
                    mute: "–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫",
                    unmute: "–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫",
                    activateCamera: "–í–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É",
                    deactivateCamera: "–í—ã–∫–ª—é—á–∏—Ç—å –∫–∞–º–µ—Ä—É",
                    activationMessage: "–ü—Ä–∏–≤–µ—Ç! –Ø –ö–∞–π—Ä–∞—Ç, –≤–∞—à –≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?",
                    deactivationMessage: "–î–æ —Å–≤–∏–¥–∞–Ω–∏—è! –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å soon.",

                    // –ú–µ–Ω—é
                    game1Title: "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ",
                    game1Desc: "–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é",
                    game2Title: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫",
                    game2Desc: "–†–µ—à–∏—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ —Å –ø–æ–º–æ—â—å—é –ö–∞–π—Ä–∞—Ç–∞",
                    game3Title: "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                    game3Desc: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É–≥–∞–¥–∞—Ç—å —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100 —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ –ö–∞–π—Ä–∞—Ç–∞",
                    game4Title: "–†–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏",
                    game4Desc: "–¢—Ä–µ–Ω–∏—Ä—É–π—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –∏ –º–æ—Ç–æ—Ä–∏–∫—É",
                    game5Title: "–ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º",
                    game5Desc: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–µ–±—è –≤ —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏—è—Ö",
                    settingsMenuTitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                    settingsMenuDesc: "–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥–æ–ª–æ—Å –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–º–æ—â–Ω–∏–∫–∞",

                    // –û–±—â–∏–µ
                    backToMenu: "–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é",
                    backToProfessions: "–ù–∞–∑–∞–¥ –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º",

                    // –ë—É–¥—É—â–µ–µ
                    futureTitle: "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ",
                    roundInfo: "–†–∞—É–Ω–¥ {round} –∏–∑ 6",
                    resultsTitle: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞",
                    moodResult: "–í–∞—à–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ: {mood}",
                    jobResult: "–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ä–∞–±–æ—Ç–∞: {job}",
                    tryProfession: "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é",

                    // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
                    mathTitle: "–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫",
                    checkAnswer: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç",
                    voiceAnswer: "–û—Ç–≤–µ—Ç–∏—Ç—å –≥–æ–ª–æ—Å–æ–º",
                    newProblem: "–ù–æ–≤–∞—è –∑–∞–¥–∞—á–∞",

                    // –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ
                    guessTitle: "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ",
                    guessFeedback: "–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100. –ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å!",
                    guessHigher: "–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –±–æ–ª—å—à–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!",
                    guessLower: "–ó–∞–≥–∞–¥–∞–Ω–Ω–æ–µ —á–∏—Å–ª–æ –º–µ–Ω—å—à–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!",
                    guessSuccess: "–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã —É–≥–∞–¥–∞–ª —á–∏—Å–ª–æ {number} —Å {attempts} –ø–æ–ø—ã—Ç–∫–∏!",
                    newGame: "–ù–æ–≤–∞—è –∏–≥—Ä—ã",
                    check: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å",
                    sayNumber: "–°–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ",

                    // –ú–æ—Ç–æ—Ä–∏–∫–∞
                    motorTitle: "–†–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏",
                    startGame: "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É",
                    score: "–û—á–∫–∏: {score}",
                    time: "–í—Ä–µ–º—è: {time}",
                    targets: "–¶–µ–ª–∏: {targets}",
                    finalScore: "–ù–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤: {score}",
                    accuracy: "–¢–æ—á–Ω–æ—Å—Ç—å: {accuracy}%",

                    // –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏
                    professionTitle: "–ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º",
                    programmer: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç",
                    engineer: "–ò–Ω–∂–µ–Ω–µ—Ä",
                    designer: "–î–∏–∑–∞–π–Ω–µ—Ä",
                    chooseProfession: "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –Ω–µ–π!",

                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    settingsTitle: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞",
                    voiceSelection: "–í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞",
                    speechRate: "–°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—á–∏",
                    pitch: "–í—ã—Å–æ—Ç–∞ —Ç–æ–Ω–∞",
                    volume: "–ì—Ä–æ–º–∫–æ—Å—Ç—å",
                    continuousRecognition: "–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ",
                    slow: "–ú–µ–¥–ª–µ–Ω–Ω–æ",
                    fast: "–ë—ã—Å—Ç—Ä–æ",
                    low: "–ù–∏–∑–∫–∏–π",
                    high: "–í—ã—Å–æ–∫–∏–π",
                    quiet: "–¢–∏—Ö–∏–π",
                    loud: "–ì—Ä–æ–º–∫–∏–π",

                    // –ü–æ–¥—Å–∫–∞–∑–∫–∏
                    hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞ {number}",
                    hintMessage: "–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: {step}",
                    noHints: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å",
                    
                    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    success: "–£—Å–ø–µ—Ö!",
                    failure: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!",
                    professionResult: "–ò—Å—Ö–æ–¥—è –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –≤—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ –∏–≥—Ä—ã –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–∞—à–µ–π –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏, –≤–∞–º –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ {profession}. –ú—ã —É–≤–µ—Ä–µ–Ω—ã –Ω–∞ {percentage}%, —á—Ç–æ –æ–Ω–∞ –≤–∞–º –ø–æ–¥–æ–π–¥–µ—Ç.",

                    // –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü
                    faceDetected: "–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ª–∏—Ü–æ! –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å!",
                    noFaceDetected: "–õ–∏—Ü–æ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–∞–º–µ—Ä—É.",
                    cameraActive: "–ö–∞–º–µ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞. –ò–¥–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ...",
                    cameraInactive: "–ö–∞–º–µ—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞."
                },
                kk: {
                    mainTitle: "–î–∞—É—ã—Å—Ç—ã“õ –∫”©–º–µ–∫—à—ñ “ö–∞–π—Ä–∞—Ç",
                    statusWaiting: "–ë–µ–ª—Å–µ–Ω–¥—ñ—Ä—É “Ø—à—ñ–Ω '“ö–∞–π—Ä–∞—Ç' –¥–µ–ø –∞–π—Ç—ã“£—ã–∑",
                    statusListening: "–¢—ã“£–¥–∞—É–¥–∞...",
                    statusProcessing: "”®“£–¥–µ—É–¥–µ...",
                    statusActivated: "–ë–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ª–¥—ñ. –ü”ô—Ä–º–µ–Ω–¥–µ—Ä–¥—ñ –∞–π—Ç—ã“£—ã–∑",
                    activateVoice: "–î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É–¥—ã –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—É",
                    mute: "–î—ã–±—ã—Å—Ç—ã ”©—à—ñ—Ä—É",
                    unmute: "–î—ã–±—ã—Å—Ç—ã “õ–æ—Å—É",
                    activateCamera: "–ö–∞–º–µ—Ä–∞–Ω—ã “õ–æ—Å—É",
                    deactivateCamera: "–ö–∞–º–µ—Ä–∞–Ω—ã ”©—à—ñ—Ä—É",
                    activationMessage: "–°”ô–ª–µ–º! –ú–µ–Ω “ö–∞–π—Ä–∞—Ç, —Å—ñ–∑–¥—ñ“£ –¥–∞—É—ã—Å—Ç—ã“õ –∫”©–º–µ–∫—à—ñ“£—ñ–∑. “ö–∞–ª–∞–π –∫”©–º–µ–∫—Ç–µ—Å–µ –∞–ª–∞–º—ã–Ω?",
                    deactivationMessage: "–°–∞—É –±–æ–ª—ã“£—ã–∑! –ñ—É—ã“õ—Ç–∞ –∫”©—Ä—ñ—Å–µ–º—ñ–∑.",

                    // –ú–µ–Ω—é
                    game1Title: "–ë–æ–ª–∞—à–∞“ì—ã–Ω–¥—ã –∞–Ω—ã“õ—Ç–∞",
                    game1Desc: "–ö”©“£—ñ–ª-–∫“Ø–π—ñ“£—ñ–∑–¥—ñ –∂”ô–Ω–µ “±—Å—ã–Ω—ã–ª–∞—Ç—ã–Ω –∫”ô—Å—ñ–±—ñ“£—ñ–∑–¥—ñ –±—ñ–ª—ñ“£—ñ–∑",
                    game2Title: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –∫”©–º–µ–∫—à—ñ",
                    game2Desc: "“ö–∞–π—Ä–∞—Ç—Ç—ã“£ –∫”©–º–µ–≥—ñ–º–µ–Ω –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –µ—Å–µ–ø—Ç–µ—Ä–¥—ñ —à–µ—à—ñ“£—ñ–∑",
                    game3Title: "–°–∞–Ω–¥—ã —Ç–∞–ø",
                    game3Desc: "“ö–∞–π—Ä–∞—Ç—Ç—ã“£ –∫”©—Ä—Å–µ—Ç—É–ª–µ—Ä—ñ–º–µ–Ω 1-–¥–µ–Ω 100-–≥–µ –¥–µ–π—ñ–Ω–≥—ñ —Å–∞–Ω–¥—ã —Ç–∞–±—É“ì–∞ —Ç—ã—Ä—ã—Å—ã“£—ã–∑",
                    game4Title: "–ú–æ—Ç–æ—Ä–∏–∫–∞–Ω—ã –¥–∞–º—ã—Ç—É",
                    game4Desc: "–†–µ–∞–∫—Ü–∏—è –∂—ã–ª–¥–∞–º–¥—ã“ì—ã –º–µ–Ω –º–æ—Ç–æ—Ä–∏–∫–∞–Ω—ã –∂–∞—Ç—Ç—ã“õ—Ç—ã—Ä—ã“£—ã–∑",
                    game5Title: "–ö”ô—Å—ñ–ø—Ç–µ—Ä –æ–π—ã–Ω—ã",
                    game5Desc: "”®–∑—ñ“£—ñ–∑–¥—ñ ”ô—Ä—Ç“Ø—Ä–ª—ñ –∫”ô—Å—ñ–ø—Ç–µ—Ä–¥–µ —Å—ã–Ω–∞–ø –∫”©—Ä—ñ“£—ñ–∑",
                    settingsMenuTitle: "–ë–∞–ø—Ç–∞—É–ª–∞—Ä",
                    settingsMenuDesc: "–ö”©–º–µ–∫—à—ñ–Ω—ñ“£ –¥–∞—É—ã—Å—ã–Ω –∂”ô–Ω–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–ª–µ—Ä—ñ–Ω –±–∞–ø—Ç–∞“£—ã–∑",

                    // –û–±—â–∏–µ
                    backToMenu: "–ú”ô–∑—ñ—Ä–≥–µ –æ—Ä–∞–ª—É",
                    backToProfessions: "–ö”ô—Å—ñ–ø—Ç–µ—Ä–≥–µ –æ—Ä–∞–ª—É",

                    // –ë—É–¥—É—â–µ–µ
                    futureTitle: "–ë–æ–ª–∞—à–∞“ì—ã–Ω–¥—ã –∞–Ω—ã“õ—Ç–∞",
                    roundInfo: "–†–∞—É–Ω–¥ {round} 6-—Ç–∞–Ω",
                    resultsTitle: "–¢–∞–ª–¥–∞—É –Ω”ô—Ç–∏–∂–µ–ª–µ—Ä—ñ",
                    moodResult: "–°—ñ–∑–¥—ñ“£ –∫”©“£—ñ–ª-–∫“Ø–π—ñ“£—ñ–∑: {mood}",
                    jobResult: "“∞—Å—ã–Ω—ã–ª–∞—Ç—ã–Ω –∂“±–º—ã—Å: {job}",
                    tryProfession: "–ö”ô—Å—ñ–ø—Ç—ñ —Å—ã–Ω–∞–ø –∫”©—Ä—ñ“£—ñ–∑",

                    // –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
                    mathTitle: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –∫”©–º–µ–∫—à—ñ",
                    checkAnswer: "–ñ–∞—É–∞–ø—Ç—ã —Ç–µ–∫—Å–µ—Ä—É",
                    voiceAnswer: "–î–∞—É—ã—Å–ø–µ–Ω –∂–∞—É–∞–ø –±–µ—Ä—É",
                    newProblem: "–ñ–∞“£–∞ –µ—Å–µ–ø",

                    // –£–≥–∞–¥–∞–π —á–∏—Å–ª–æ
                    guessTitle: "–°–∞–Ω–¥—ã —Ç–∞–ø",
                    guessFeedback: "–ú–µ–Ω 1-–¥–µ–Ω 100-–≥–µ –¥–µ–π—ñ–Ω —Å–∞–Ω –æ–π–ª–∞–¥—ã–º. –û–Ω—ã —Ç–∞–ø“õ—ã“£ –∫–µ–ª—Å–µ!",
                    guessHigher: "–û–π–ª–∞“ì–∞–Ω —Å–∞–Ω—ã–º “Ø–ª–∫–µ–Ω—ñ—Ä–µ–∫. –¢–∞“ì—ã –±–∞–π“õ–∞–ø –∫”©—Ä!",
                    guessLower: "–û–π–ª–∞“ì–∞–Ω —Å–∞–Ω—ã–º –∫—ñ—à—ñ—Ä–µ–∫. –¢–∞“ì—ã –±–∞–π“õ–∞–ø –∫”©—Ä!",
                    guessSuccess: "“ö“±—Ç—Ç—ã“õ—Ç–∞–π–º—ã–Ω! –°–µ–Ω {number} —Å–∞–Ω—ã–Ω {attempts} —Ä–µ—Ç –±–∞–π“õ–∞–ø —Ç–∞–ø—Ç—ã“£!",
                    newGame: "–ñ–∞“£–∞ –æ–π—ã–Ω",
                    check: "–¢–µ–∫—Å–µ—Ä—É",
                    sayNumber: "–°–∞–Ω–¥—ã –∞–π—Ç—É",

                    // –ú–æ—Ç–æ—Ä–∏–∫–∞
                    motorTitle: "–ú–æ—Ç–æ—Ä–∏–∫–∞–Ω—ã –¥–∞–º—ã—Ç—É",
                    startGame: "–û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É",
                    score: "“∞–ø–∞–π: {score}",
                    time: "–£–∞“õ—ã—Ç: {time}",
                    targets: "–ù—ã—Å–∞–Ω–¥–∞—Ä: {targets}",
                    finalScore: "–ñ–∏–Ω–∞–ª“ì–∞–Ω “±–ø–∞–π: {score}",
                    accuracy: "–î”ô–ª–¥—ñ–∫: {accuracy}%",

                    // –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏
                    professionTitle: "–ö”ô—Å—ñ–ø—Ç–µ—Ä –æ–π—ã–Ω—ã",
                    programmer: "–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç",
                    engineer: "–ò–Ω–∂–µ–Ω–µ—Ä",
                    designer: "–î–∏–∑–∞–π–Ω–µ—Ä",
                    chooseProfession: "”®–∑—ñ“£—ñ–∑–¥—ñ —Å—ã–Ω–∞–ø –∫”©—Ä—É “Ø—à—ñ–Ω –∫”ô—Å—ñ–ø —Ç–∞“£–¥–∞“£—ã–∑!",

                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    settingsTitle: "–î–∞—É—ã—Å –±–∞–ø—Ç–∞—É–ª–∞—Ä—ã",
                    voiceSelection: "–î–∞—É—ã—Å —Ç–∞“£–¥–∞—É",
                    speechRate: "–°”©–π–ª–µ—É –∂—ã–ª–º–∞–¥—ã“ì—ã",
                    pitch: "“Æ–Ω –±–∏—ñ–∫—Ç—ñƒüi",
                    volume: "“ö–∞—Ç—Ç—ã–ª—ã“õ",
                    continuousRecognition: "“Æ–∑–¥—ñ–∫—Å—ñ–∑ —Ç–∞–Ω—É",
                    slow: "–ë–∞—è—É",
                    fast: "–ñ—ã–ª–¥–∞–º",
                    low: "–¢”©–º–µ–Ω",
                    high: "–ñ–æ“ì–∞—Ä—ã",
                    quiet: "“ö–∞—Ç—ã–Ω–¥—ã",
                    loud: "“ö–∞—Ç—Ç—ã",

                    // –ü–æ–¥—Å–∫–∞–∑–∫–∏
                    hint: "–ö”©—Ä—Å–µ—Ç—É {number}",
                    hintMessage: "–ö–µ–ª–µ—Å—ñ “õ–∞–¥–∞–º: {step}",
                    noHints: "–ö”©—Ä—Å–µ—Ç—É–ª–µ—Ä –∞—è“õ—Ç–∞–ª–¥—ã",
                    
                    // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
                    success: "–¢–∞–±—ã—Å!",
                    failure: "–¢–∞“ì—ã –±–∞–π“õ–∞–ø –∫”©—Ä—ñ“£—ñ–∑!",
                    professionResult: "–°—ñ–∑–¥—ñ“£ –∫”ô—Å—ñ–ø—Ç—ñ –∞–Ω—ã“õ—Ç–∞—É –æ–π—ã–Ω–¥–∞—Ä—ã–Ω ”©—Ç–∫–µ–Ω—ñ“£—ñ–∑–≥–µ –±–∞–π–ª–∞–Ω—ã—Å—Ç—ã, —Å—ñ–∑–≥–µ {profession} –∫”ô—Å—ñ–±—ñ–Ω —Å—ã–Ω–∞–ø –∫”©—Ä—É–≥–µ –∫–µ“£–µ—Å –±–µ—Ä–µ–º—ñ–∑. –ë—ñ–∑ –æ–Ω—ã“£ —Å—ñ–∑–≥–µ —Å”ô–π–∫–µ—Å –∫–µ–ª–µ—Ç—ñ–Ω—ñ–Ω–µ {percentage}% —Å–µ–Ω—ñ–º–¥—ñ–º—ñ–∑.",

                    // –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü
                    faceDetected: "–ë–µ—Ç —Ç–∞–±—ã–ª–¥—ã! –°”ô–ª–µ–º, –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã!",
                    noFaceDetected: "–ë–µ—Ç —Ç–∞–±—ã–ª–º–∞–¥—ã. –ö–∞–º–µ—Ä–∞–Ω—ã —Ä–µ—Ç—Ç–µ“£—ñ–∑.",
                    cameraActive: "–ö–∞–º–µ—Ä–∞ –±–µ–ª—Å–µ–Ω–¥—ñ. –¢–∞–Ω—É –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä...",
                    cameraInactive: "–ö–∞–º–µ—Ä–∞ –±–µ–ª—Å–µ–Ω–¥—ñ –µ–º–µ—Å."
                }
            };

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            function init() {
                setupEventListeners();
                updateUI();
                generateMathProblem();
                setupSettings();
                loadLeaderboard();
                loadFaceAPI();
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
                if ('speechSynthesis' in window) {
                    synthesis = window.speechSynthesis;
                    synthesis.onvoiceschanged = loadVoices;
                    loadVoices();
                }
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ Face API
            async function loadFaceAPI() {
                try {
                    await faceapi.nets.tinyFaceDetector.loadFromUri('/models');
                    await faceapi.nets.faceLandmark68Net.loadFromUri('/models');
                    await faceapi.nets.faceRecognitionNet.loadFromUri('/models');
                    await faceapi.nets.faceExpressionNet.loadFromUri('/models');
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞ –ª–∏—Ü
                    faceDetectionOptions = new faceapi.TinyFaceDetectorOptions({
                        inputSize: 512,
                        scoreThreshold: 0.5
                    });
                    
                    console.log('Face API –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
                } catch (e) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ Face API:', e);
                }
            }

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            function setupVoiceRecognition() {
                const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                
                if (!SpeechRecognition) {
                    statusDiv.textContent = currentLanguage === 'ru' ? 
                        '–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ' : 
                        '–°—ñ–∑–¥—ñ“£ —à–æ–ª“ì—ã—à—ã“£—ã–∑ –¥–∞—É—ã—Å—Ç—ã“õ —Ç–∞–Ω—É–¥—ã “õ–æ–ª–¥–∞–º–∞–π–¥—ã';
                    return;
                }

                recognition = new SpeechRecognition();
                recognition.continuous = true;
                recognition.lang = currentLanguage === 'ru' ? 'ru-RU' : 'kk-KZ';
                recognition.interimResults = false;

                recognition.onstart = function() {
                    isListening = true;
                    voiceBtn.textContent = translations[currentLanguage].statusListening;
                    document.body.classList.add('listening');
                    speak(currentLanguage === 'ru' ? '–ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ' : '–î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ª–¥—ñ');
                };

                recognition.onresult = function(event) {
                    const transcript = event.results[event.results.length - 1][0].transcript.toLowerCase();
                    
                    // –ï—Å–ª–∏ –µ—â–µ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω, –ø—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
                    if (!isActivated) {
                        if (checkActivationPhrase(transcript)) {
                            isActivated = true;
                            speak(translations[currentLanguage].activationMessage);
                            statusDiv.textContent = translations[currentLanguage].statusActivated;
                        }
                    } else {
                        // –ï—Å–ª–∏ —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é
                        processVoiceCommand(transcript);
                    }
                };

                recognition.onerror = function(event) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:', event.error);
                    stopListening();
                };

                recognition.onend = function() {
                    if (isListening && continuousRecognition.checked) {
                        recognition.start(); // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ
                    }
                };
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–∞–∑—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏
            function checkActivationPhrase(transcript) {
                const ruPhrases = ['–∫–∞–π—Ä–∞—Ç', '–∫–æ–π—Ä–∞—Ç', '—Ö–∞–π—Ä–∞—Ç', '–∫–∞—Ä–∞—Ç', '–∞–π—Ä–∞—Ç', '–∞–∫—Ç–∏–≤–∏—Ä—É–π', '–≤–∫–ª—é—á–∏—Å—å', '–ø—Ä–æ—Å–Ω–∏—Å—å', '–ø—Ä–∏–≤–µ—Ç', '—Å–ª—É—à–∞–π'];
                const kkPhrases = ['“õ–∞–π—Ä–∞—Ç', '“õ–æ–π—Ä–∞—Ç', '—Ö–∞–π—Ä–∞—Ç', '“õ–∞—Ä–∞—Ç', '–∞–π—Ä–∞—Ç', '–±–µ–ª—Å–µ–Ω–¥—ñ—Ä', '“õ–æ—Å—ã–ª', '—Ç“±—Ä', '—Å”ô–ª–µ–º', '—Ç—ã–Ω–¥–∞'];
                
                const phrases = currentLanguage === 'ru' ? ruPhrases : kkPhrases;
                
                return phrases.some(phrase => transcript.includes(phrase));
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–æ–ª–æ—Å–æ–≤
            function loadVoices() {
                if (!synthesis) return;

                const voices = synthesis.getVoices();
                voiceSelect.innerHTML = '<option value="">–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é</option>';

                voices.forEach(voice => {
                    if (voice.lang.includes(currentLanguage === 'ru' ? 'ru' : 'kk')) {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        voiceSelect.appendChild(option);
                    }
                });
            }

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥–æ–ª–æ—Å–∞
            function setupSettings() {
                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                speedSlider.value = localStorage.getItem('speechSpeed') || 1;
                pitchSlider.value = localStorage.getItem('speechPitch') || 1;
                volumeSlider.value = localStorage.getItem('speechVolume') || 1;
                continuousRecognition.checked = localStorage.getItem('continuousRecognition') !== 'false';

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
                speedValue.textContent = parseFloat(speedSlider.value).toFixed(1);
                pitchValue.textContent = parseFloat(pitchSlider.value).toFixed(1);
                volumeValue.textContent = parseFloat(volumeSlider.value).toFixed(1);

                // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
                speedSlider.addEventListener('input', function() {
                    speedValue.textContent = parseFloat(this.value).toFixed(1);
                    localStorage.setItem('speechSpeed', this.value);
                });

                pitchSlider.addEventListener('input', function() {
                    pitchValue.textContent = parseFloat(this.value).toFixed(1);
                    localStorage.setItem('speechPitch', this.value);
                });

                volumeSlider.addEventListener('input', function() {
                    volumeValue.textContent = parseFloat(this.value).toFixed(1);
                    localStorage.setItem('speechVolume', this.value);
                });

                voiceSelect.addEventListener('change', function() {
                    localStorage.setItem('selectedVoice', this.value);
                });

                continuousRecognition.addEventListener('change', function() {
                    localStorage.setItem('continuousRecognition', this.checked);
                    if (isListening && this.checked) {
                        recognition.start();
                    } else if (isListening && !this.checked) {
                        recognition.stop();
                    }
                });

                // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≥–æ–ª–æ—Å–∞
                const savedVoice = localStorage.getItem('selectedVoice');
                if (savedVoice) {
                    voiceSelect.value = savedVoice;
                }
            }

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∫–æ—Ä–¥–æ–≤
            function loadLeaderboard() {
                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏
                const mathScoresData = JSON.parse(localStorage.getItem('mathScores')) || {};
                mathScores.innerHTML = '';

                for (const difficulty in mathScoresData) {
                    if (mathScoresData[difficulty].length > 0) {
                        const div = document.createElement('div');
                        div.innerHTML = `<h4>${difficulty}</h4>`;
                        mathScoresData[difficulty].forEach(score => {
                            const item = document.createElement('div');
                            item.className = 'leaderboard-item';
                            item.textContent = `${score.name}: ${score.score}`;
                            div.appendChild(item);
                        });
                        mathScores.appendChild(div);
                    }
                }

                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∫–æ—Ä–¥–æ–≤ –¥–ª—è –º–æ—Ç–æ—Ä–∏–∫–∏
                const motorScoresData = JSON.parse(localStorage.getItem('motorScores')) || {};
                motorScores.innerHTML = '';

                for (const difficulty in motorScoresData) {
                    if (motorScoresData[difficulty].length > 0) {
                        const div = document.createElement('div');
                        div.innerHTML = `<h4>${difficulty}</h4>`;
                        motorScoresData[difficulty].forEach(score => {
                            const item = document.createElement('div');
                            item.className = 'leaderboard-item';
                            item.textContent = `${score.name}: ${score.score}`;
                            div.appendChild(item);
                        });
                        motorScores.appendChild(div);
                    }
                }
            }

            // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∫–æ—Ä–¥–æ–≤
            function saveScore(game, difficulty, score) {
                const scoresData = JSON.parse(localStorage.getItem(`${game}Scores`)) || {};

                if (!scoresData[difficulty]) {
                    scoresData[difficulty] = [];
                }

                // –ó–∞–ø—Ä–æ—Å –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞
                const playerName = prompt(currentLanguage === 'ru' ? 
                    '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∫–æ—Ä–¥–æ–≤:' : 
                    '–†–µ–∫–æ—Ä–¥—Ç–∞—Ä –∫–µ—Å—Ç–µ—Å—ñ “Ø—à—ñ–Ω –∞—Ç—ã“£—ã–∑–¥—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑:') || 'Player';

                scoresData[difficulty].push({ name: playerName, score: score });

                // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —É–±—ã–≤–∞–Ω–∏—é
                scoresData[difficulty].sort((a, b) => b.score - a.score);

                // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–ø-5
                scoresData[difficulty] = scoresData[difficulty].slice(0, 5);

                localStorage.setItem(`${game}Scores`, JSON.stringify(scoresData));
                loadLeaderboard();
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≥–æ–ª–æ—Å–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥
            function processVoiceCommand(transcript) {
                statusDiv.textContent = translations[currentLanguage].statusProcessing;

                // –ö–æ–º–∞–Ω–¥—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                if (checkCommand(transcript, ['–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é', '–≥–ª–∞–≤–Ω–æ–µ', '–º–µ–Ω—é', '–¥–æ–º–æ–π', '–Ω–∞ –≥–ª–∞–≤–Ω—É—é', '–≤—ã—Ö–æ–¥', '–æ—Ç–º–µ–Ω–∞'])) {
                    showMainMenu();
                    speak(currentLanguage === 'ru' ? '–û—Ç–∫—Ä—ã–≤–∞—é –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é' : '–ë–∞—Å—Ç—ã –º”ô–∑—ñ—Ä–¥—ñ –∞—à—É');
                }
                else if (checkCommand(transcript, ['–±—É–¥—É—â–µ–µ', '–Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', '–ø—Ä–æ—Ñ–µ—Å—Å–∏—è', '–∞–Ω–∞–ª–∏–∑', '—Ç–µ—Å—Ç', '–ø—Å–∏—Ö–æ–ª–æ–≥–∏—è'])) {
                    startGame('future');
                    speak(currentLanguage === 'ru' ? '–ó–∞–ø—É—Å–∫–∞—é –∏–≥—Ä—É "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ"' : '"–ë–æ–ª–∞—à–∞“ì—ã–Ω–¥—ã –∞–Ω—ã“õ—Ç–∞" –æ–π—ã–Ω—ã–Ω —ñ—Å–∫–µ “õ–æ—Å—É');
                }
                else if (checkCommand(transcript, ['–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–º–∞—Ç–µ–º–∞—Ç–∏–∫', '–∑–∞–¥–∞—á–∞', '–ø—Ä–∏–º–µ—Ä', '—Å—á–µ—Ç', '—Ä–µ—à–∏', '–≤—ã—á–∏—Å–ª–∏'])) {
                    startGame('math');
                    speak(currentLanguage === 'ru' ? '–ó–∞–ø—É—Å–∫–∞—é –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫' : '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –∫”©–º–µ–∫—à—ñ–Ω—ñ —ñ—Å–∫–µ “õ–æ—Å—É');
                }
                else if (checkCommand(transcript, ['—É–≥–∞–¥–∞–π', '—á–∏—Å–ª–æ', '—á–∏—Å–ª–∞', '–æ—Ç–≥–∞–¥–∞–π', '–∑–∞–≥–∞–¥–∞–π', '—É–≥–∞–¥–∞–π —á–∏—Å–ª–æ', '–∏–≥—Ä–∞ —á–∏—Å–ª–æ'])) {
                    startGame('guess');
                    speak(currentLanguage === 'ru' ? '–ó–∞–ø—É—Å–∫–∞—é –∏–≥—Ä—É "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"' : '"–°–∞–Ω–¥—ã —Ç–∞–ø" –æ–π—ã–Ω—ã–Ω —ñ—Å–∫–µ “õ–æ—Å—É');
                }
                else if (checkCommand(transcript, ['–º–æ—Ç–æ—Ä–∏–∫–∞', '—Ä–µ–∞–∫—Ü–∏—è', '—Å–∫–æ—Ä–æ—Å—Ç—å', '–º–∏—à–µ–Ω—å', '—Ü–µ–ª—å', '–∫–ª–∏–∫–∞–π', '–±—ã—Å—Ç—Ä–æ'])) {
                    startGame('motor');
                    speak(currentLanguage === 'ru' ? '–ó–∞–ø—É—Å–∫–∞—é –∏–≥—Ä—É –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏' : '–ú–æ—Ç–æ—Ä–∏–∫–∞–Ω—ã –¥–∞–º—ã—Ç—É –æ–π—ã–Ω—ã–Ω —ñ—Å–∫–µ “õ–æ—Å—É');
                }
                else if (checkCommand(transcript, ['–ø—Ä–æ—Ñ–µ—Å—Å–∏—è', '–ø—Ä–æ—Ñ–µ—Å—Å–∏–∏', '—Ä–∞–±–æ—Ç–∞', '–∫–µ–º–µ–∫', '“õ—ã–∑–º–µ—Ç', '–∫–∞—Ä—å–µ—Ä–∞', '—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å'])) {
                    startGame('profession');
                    speak(currentLanguage === 'ru' ? '–ó–∞–ø—É—Å–∫–∞—é –∏–≥—Ä—É –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º' : '–ö”ô—Å—ñ–ø—Ç–µ—Ä –±–æ–π—ã–Ω—à–∞ –æ–π—ã–Ω–¥—ã —ñ—Å–∫–µ “õ–æ—Å—É');
                }
                else if (checkCommand(transcript, ['–Ω–∞—Å—Ç—Ä–æ–π–∫–∏', '–æ–ø—Ü–∏–∏', '–ø–∞—Ä–∞–º–µ—Ç—Ä—ã', '–±–∞–ø—Ç–∞—É', '–±–∞–ø—Ç–∞—É–ª–∞—Ä', '–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è'])) {
                    startGame('settings');
                    speak(currentLanguage === 'ru' ? '–û—Ç–∫—Ä—ã–≤–∞—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏' : '–ë–∞–ø—Ç–∞—É–ª–∞—Ä–¥—ã –∞—à—É');
                }
                else if (checkCommand(transcript, ['–∫–∞–º–µ—Ä–∞', '—Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ', '–ª–∏—Ü–æ', '–±–µ—Ç', 'face', '—Ñ–æ—Ç–æ', '—Å–µ–ª—Ñ–∏'])) {
                    toggleCamera();
                }

                // –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–≥—Ä—ã "–ë—É–¥—É—â–µ–µ"
                else if (currentGame === 'future' && checkCommand(transcript, ['1', '2', '3', '–æ–¥–∏–Ω', '–¥–≤–∞', '—Ç—Ä–∏', '—Ä–∞–∑', '–¥–≤–∞', '—Ç—Ä–∏'])) {
                    let number;
                    if (checkCommand(transcript, ['1', '–æ–¥–∏–Ω', '—Ä–∞–∑'])) number = '1';
                    else if (checkCommand(transcript, ['2', '–¥–≤–∞', '–¥–≤–æ–µ'])) number = '2';
                    else if (checkCommand(transcript, ['3', '—Ç—Ä–∏', '—Ç—Ä–æ–µ'])) number = '3';

                    if (number) {
                        handleFutureNumberSelection(number);
                    }
                }

                // –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞
                else if (currentGame === 'math' && (transcript.match(/\d+/))) {
                    const numbers = transcript.match(/\d+/g);
                    if (numbers && numbers.length > 0) {
                        document.getElementById('math-answer').value = numbers[0];
                        checkMathAnswer();
                    }
                }

                // –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–≥—Ä—ã "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
                else if (currentGame === 'guess' && (transcript.match(/\d+/))) {
                    const numbers = transcript.match(/\d+/g);
                    if (numbers && numbers.length > 0) {
                        document.getElementById('guess-input').value = numbers[0];
                        checkGuess();
                    }
                }

                // –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
                else if (checkCommand(transcript, ['—Å—Ç–æ–ø', '–æ—Å—Ç–∞–Ω–æ–≤–∏—Å—å', '–≤—ã–∫–ª—é—á–∏—Å—å', '—Ö–≤–∞—Ç–∏—Ç', '–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ', '–∑–∞–º–æ–ª—á–∏', '–ø–µ—Ä–µ—Å—Ç–∞–Ω—å'])) {
                    isActivated = false;
                    speak(translations[currentLanguage].deactivationMessage);
                    statusDiv.textContent = translations[currentLanguage].statusWaiting;
                }
                else if (checkCommand(transcript, ['–º–æ–ª—á–∏', '—Ç–∏—Ö–æ', '–≤—ã–∫–ª—é—á–∏ –∑–≤—É–∫', '–±–µ—Å—à—ã–±—ã–Ω', '—Ç—ã–Ω—ã—à', '—Ç–∏—à–∏–Ω–∞'])) {
                    toggleMute();
                }
                else if (checkCommand(transcript, ['–≥–æ–≤–æ—Ä–∏', '–≤–∫–ª—é—á–∏ –∑–≤—É–∫', '—Å”©–π–ª–µ', '–¥—ã–±—ã—Å', '–æ–∑–≤—É—á—å'])) {
                    if (isMuted) toggleMute();
                }

                // –ù–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞
                else {
                    speak(currentLanguage === 'ru' ? '–Ø –Ω–µ –ø–æ–Ω—è–ª –∫–æ–º–∞–Ω–¥—É. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.' : '–ú–µ–Ω –ø”ô—Ä–º–µ–Ω–¥—ñ —Ç“Ø—Å—ñ–Ω–±–µ–¥—ñ–º. –¢–∞“ì—ã –±–∞–π“õ–∞–ø –∫”©—Ä—ñ“£—ñ–∑.');
                }

                setTimeout(() => {
                    if (isActivated) {
                        statusDiv.textContent = translations[currentLanguage].statusActivated;
                    } else {
                        statusDiv.textContent = translations[currentLanguage].statusWaiting;
                    }
                }, 2000);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
            function checkCommand(transcript, commands) {
                return commands.some(command => transcript.includes(command));
            }

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
            function setupEventListeners() {
                // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
                langRuBtn.addEventListener('click', () => switchLanguage('ru'));
                langKkBtn.addEventListener('click', () => switchLanguage('kk'));

                // –ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                voiceBtn.addEventListener('click', toggleListening);

                // –ö–Ω–æ–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞
                muteBtn.addEventListener('click', toggleMute);

                // –ö–Ω–æ–ø–∫–∞ –∫–∞–º–µ—Ä—ã
                cameraBtn.addEventListener('click', toggleCamera);

                // –ò–∫–æ–Ω–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
                settingsIcon.addEventListener('click', () => startGame('settings'));

                // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é
                menuItems.forEach(item => {
                    item.addEventListener('click', function() {
                        startGame(this.dataset.game);
                    });
                });

                // –ö–Ω–æ–ø–∫–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞
                backFromFuture.addEventListener('click', showMainMenu);
                backFromMath.addEventListener('click', showMainMenu);
                backFromGuess.addEventListener('click', showMainMenu);
                backFromMotor.addEventListener('click', showMainMenu);
                backFromProfession.addEventListener('click', showMainMenu);
                backFromSettings.addEventListener('click', showMainMenu);
                backFromProgrammer.addEventListener('click', () => showProfessionSelection());
                backFromEngineer.addEventListener('click', () => showProfessionSelection());
                backFromDesigner.addEventListener('click', () => showProfessionSelection());

                // –ò–≥—Ä–∞ "–ë—É–¥—É—â–µ–µ"
                const numbers = document.querySelectorAll('.number');
                numbers.forEach(number => {
                    number.addEventListener('click', function() {
                        if (currentGame === 'future') {
                            handleFutureNumberSelection(this.dataset.number);
                        }
                    });
                });

                // –ö–Ω–æ–ø–∫–∞ "–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–µ—Å—Å–∏—é"
                tryProfessionBtn.addEventListener('click', () => {
                    startGame('profession');
                });

                // –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫
                document.getElementById('check-math').addEventListener('click', checkMathAnswer);
                document.getElementById('voice-math').addEventListener('click', () => {
                    speak(currentLanguage === 'ru' ? '–ù–∞–∑–æ–≤–∏—Ç–µ –æ—Ç–≤–µ—Ç' : '–ñ–∞—É–∞–±—ã“£—ã–∑–¥—ã –∞—Ç–∞“£—ã–∑');
                });
                document.getElementById('new-math').addEventListener('click', generateMathProblem);

                // –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏
                const mathDifficultyBtns = document.querySelectorAll('#game-math .difficulty-btn');
                mathDifficultyBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        mathDifficultyBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        mathDifficulty = this.dataset.difficulty;
                        generateMathProblem();
                    });
                });

                // –ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
                document.getElementById('check-guess').addEventListener('click', checkGuess);
                document.getElementById('voice-guess').addEventListener('click', () => {
                    speak(currentLanguage === 'ru' ? '–ù–∞–∑–æ–≤–∏—Ç–µ —á–∏—Å–ª–æ' : '–°–∞–Ω–¥—ã –∞—Ç–∞“£—ã–∑');
                });
                document.getElementById('new-game').addEventListener('click', startGuessGame);

                // –ò–≥—Ä–∞ –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
                startMotorBtn.addEventListener('click', startMotorGame);
                motorGameContainer.addEventListener('click', function(e) {
                    if (e.target.classList.contains('target')) {
                        handleTargetClick(e.target);
                    }
                });

                // –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ—Ç–æ—Ä–∏–∫–∏
                const motorDifficultyBtns = document.querySelectorAll('#game-motor .difficulty-btn');
                motorDifficultyBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        motorDifficultyBtns.forEach(b => b.classList.remove('active'));
                        this.classList.add('active');
                        motorDifficulty = this.dataset.difficulty;
                    });
                });

                // –ò–≥—Ä–∞ –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
                const professionItems = document.querySelectorAll('#game-profession .menu-item');
                professionItems.forEach(item => {
                    item.addEventListener('click', function() {
                        startProfessionGame(this.dataset.profession);
                    });
                });

                // –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
                hintButtons.forEach((btn, index) => {
                    btn.addEventListener('click', () => {
                        useHint(index);
                    });
                });

                checkCodeBtn.addEventListener('click', checkCode);
                resetCodeBtn.addEventListener('click', resetCode);

                // –ò–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è –∏–≥—Ä–∞
                document.getElementById('check-construction').addEventListener('click', checkConstruction);
                document.getElementById('reset-construction').addEventListener('click', resetConstruction);

                // –î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è –∏–≥—Ä–∞
                document.getElementById('check-design').addEventListener('click', checkDesign);
                document.getElementById('reset-design').addEventListener('click', resetDesign);

                // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º –ø–æ Enter
                document.getElementById('math-answer').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkMathAnswer();
                    }
                });

                document.getElementById('guess-input').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        checkGuess();
                    }
                });
            }

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞
            function switchLanguage(lang) {
                currentLanguage = lang;
                langRuBtn.classList.toggle('active', lang === 'ru');
                langKkBtn.classList.toggle('active', lang === 'kk');

                // –û–±–Ω–æ–≤–ª—è–µ–º —è–∑—ã–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
                if (recognition) {
                    recognition.lang = currentLanguage === 'ru' ? 'ru-RU' : 'kk-KZ';
                    
                    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ —Å –Ω–æ–≤—ã–º —è–∑—ã–∫–æ–º
                    if (isListening) {
                        recognition.stop();
                        setTimeout(() => recognition.start(), 300);
                    }
                }

                // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –≥–æ–ª–æ—Å–∞
                loadVoices();
                updateUI();
            }

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –∑–≤—É–∫–∞
            function toggleMute() {
                isMuted = !isMuted;
                muteBtn.textContent = isMuted ? 
                    translations[currentLanguage].unmute : 
                    translations[currentLanguage].mute;
                
                if (isMuted) {
                    speak(currentLanguage === 'ru' ? '–ó–≤—É–∫ –≤—ã–∫–ª—é—á–µ–Ω' : '–î—ã–±—ã—Å ”©—à—ñ—Ä—ñ–ª–¥—ñ');
                } else {
                    speak(currentLanguage === 'ru' ? '–ó–≤—É–∫ –≤–∫–ª—é—á–µ–Ω' : '–î—ã–±—ã—Å “õ–æ—Å—ã–ª–¥—ã');
                }
            }

            // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
            async function toggleCamera() {
                if (cameraActive) {
                    // –í—ã–∫–ª—é—á–∞–µ–º –∫–∞–º–µ—Ä—É
                    cameraActive = false;
                    cameraSection.classList.add('hidden');
                    cameraBtn.textContent = translations[currentLanguage].activateCamera;
                    
                    if (faceDetectionInterval) {
                        clearInterval(faceDetectionInterval);
                        faceDetectionInterval = null;
                    }
                    
                    if (video.srcObject) {
                        const tracks = video.srcObject.getTracks();
                        tracks.forEach(track => track.stop());
                        video.srcObject = null;
                    }
                    
                    speak(currentLanguage === 'ru' ? '–ö–∞–º–µ—Ä–∞ –≤—ã–∫–ª—é—á–µ–Ω–∞' : '–ö–∞–º–µ—Ä–∞ ”©—à—ñ—Ä—ñ–ª–¥—ñ');
                } else {
                    // –í–∫–ª—é—á–∞–µ–º –∫–∞–º–µ—Ä—É
                    try {
                        const stream = await navigator.mediaDevices.getUserMedia({ 
                            video: { width: 640, height: 480 } 
                        });
                        
                        video.srcObject = stream;
                        cameraActive = true;
                        cameraSection.classList.remove('hidden');
                        cameraBtn.textContent = translations[currentLanguage].deactivateCamera;
                        
                        // –ó–∞–ø—É—Å–∫–∞–µ–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü
                        startFaceDetection();
                        
                        speak(currentLanguage === 'ru' ? '–ö–∞–º–µ—Ä–∞ –≤–∫–ª—é—á–µ–Ω–∞. –ò–¥–µ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –ª–∏—Ü.' : '–ö–∞–º–µ—Ä–∞ “õ–æ—Å—ã–ª–¥—ã. –ë–µ—Ç—Ç—ñ —Ç–∞–Ω—É –∂“Ø—Ä—ñ–ø –∂–∞—Ç—ã—Ä.');
                    } catch (err) {
                        console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞–º–µ—Ä–µ:', err);
                        speak(currentLanguage === 'ru' ? '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ' : '–ö–∞–º–µ—Ä–∞“ì–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã');
                    }
                }
            }

            // –ó–∞–ø—É—Å–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü
            function startFaceDetection() {
                if (faceDetectionInterval) {
                    clearInterval(faceDetectionInterval);
                }
                
                faceDetectionInterval = setInterval(async () => {
                    if (video.readyState === video.HAVE_ENOUGH_DATA) {
                        const detections = await faceapi.detectAllFaces(video, faceDetectionOptions)
                            .withFaceLandmarks()
                            .withFaceExpressions();
                        
                        // –û—á–∏—â–∞–µ–º canvas
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        
                        // –†–∏—Å—É–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ª–∏—Ü–∞
                        if (detections && detections.length > 0) {
                            const resizedDetections = faceapi.resizeResults(detections, {
                                width: video.width,
                                height: video.height
                            });
                            
                            faceapi.draw.drawDetections(canvas, resizedDetections);
                            faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);
                            faceapi.draw.drawFaceExpressions(canvas, resizedDetections);
                            
                            // –û–∑–≤—É—á–∏–≤–∞–µ–º –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (–Ω–µ —á–∞—â–µ —á–µ–º —Ä–∞–∑ –≤ cooldown)
                            const now = Date.now();
                            if (now - lastFaceDetection > faceDetectionCooldown) {
                                speak(translations[currentLanguage].faceDetected);
                                lastFaceDetection = now;
                            }
                            
                            faceInfo.textContent = currentLanguage === 'ru' ? 
                                `–û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –ª–∏—Ü: ${detections.length}` : 
                                `–ë–µ—Ç—Ç–µ—Ä —Ç–∞–±—ã–ª–¥—ã: ${detections.length}`;
                        } else {
                            faceInfo.textContent = translations[currentLanguage].noFaceDetected;
                        }
                    }
                }, 300);
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
            function updateUI() {
                const t = translations[currentLanguage];
                mainTitle.textContent = t.mainTitle;
                
                if (isActivated) {
                    statusDiv.textContent = t.statusActivated;
                } else {
                    statusDiv.textContent = t.statusWaiting;
                }
                
                voiceBtn.textContent = t.activateVoice;
                muteBtn.textContent = isMuted ? t.unmute : t.mute;
                cameraBtn.textContent = cameraActive ? t.deactivateCamera : t.activateCamera;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã –º–µ–Ω—é
                document.getElementById('game1-title').textContent = t.game1Title;
                document.getElementById('game1-desc').textContent = t.game1Desc;
                document.getElementById('game2-title').textContent = t.game2Title;
                document.getElementById('game2-desc').textContent = t.game2Desc;
                document.getElementById('game3-title').textContent = t.game3Title;
                document.getElementById('game3-desc').textContent = t.game3Desc;
                document.getElementById('game4-title').textContent = t.game4Title;
                document.getElementById('game4-desc').textContent = t.game4Desc;
                document.getElementById('game5-title').textContent = t.game5Title;
                document.getElementById('game5-desc').textContent = t.game5Desc;

                // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç—ã –≤ –∏–≥—Ä–∞—Ö
                if (document.getElementById('future-title')) {
                    document.getElementById('future-title').textContent = t.futureTitle;
                    document.getElementById('back-from-future').textContent = t.backToMenu;
                    document.getElementById('results-title').textContent = t.resultsTitle;
                    document.getElementById('try-profession').textContent = t.tryProfession;
                    updateRoundInfo();
                }

                if (document.getElementById('math-title')) {
                    document.getElementById('math-title').textContent = t.mathTitle;
                    document.getElementById('back-from-math').textContent = t.backToMenu;
                    document.getElementById('check-math').textContent = t.checkAnswer;
                    document.getElementById('voice-math').textContent = t.voiceAnswer;
                    document.getElementById('new-math').textContent = t.newProblem;
                }

                if (document.getElementById('guess-title')) {
                    document.getElementById('guess-title').textContent = t.guessTitle;
                    document.getElementById('back-from-guess').textContent = t.backToMenu;
                    document.getElementById('check-guess').textContent = t.check;
                    document.getElementById('voice-guess').textContent = t.sayNumber;
                    document.getElementById('new-game').textContent = t.newGame;
                }

                if (document.getElementById('motor-title')) {
                    document.getElementById('motor-title').textContent = t.motorTitle;
                    document.getElementById('back-from-motor').textContent = t.backToMenu;
                    document.getElementById('start-motor').textContent = t.startGame;
                    scoreElement.textContent = t.score.replace('{score}', motorScore);
                    timeElement.textContent = t.time.replace('{time}', motorTime);
                    targetsElement.textContent = t.targets.replace('{targets}', motorTargets);
                }

                if (document.getElementById('profession-title')) {
                    document.getElementById('profession-title').textContent = t.professionTitle;
                    document.getElementById('back-from-profession').textContent = t.backToMenu;
                    document.getElementById('profession-description').innerHTML = `<p>${t.chooseProfession}</p>`;
                }

                if (document.getElementById('settings-title')) {
                    document.getElementById('settings-title').textContent = t.settingsTitle;
                    document.getElementById('back-from-settings').textContent = t.backToMenu;
                }

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –ø–æ–¥—Å–∫–∞–∑–æ–∫
                hintButtons.forEach((btn, index) => {
                    btn.textContent = t.hint.replace('{number}', index + 1);
                });
            }

            // –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è
            function toggleListening() {
                if (isListening) {
                    stopListening();
                } else {
                    // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
                    if (!microphonePermissionGranted) {
                        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                            navigator.mediaDevices.getUserMedia({ audio: true })
                                .then(function(stream) {
                                    microphonePermissionGranted = true;
                                    voiceBtn.classList.add('permission-granted');
                                    setupVoiceRecognition();
                                    startListening();
                                    
                                    // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ —Ç—Ä–µ–∫–∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
                                    stream.getTracks().forEach(track => track.stop());
                                })
                                .catch(function(err) {
                                    console.error('–û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É:', err);
                                    speak(currentLanguage === 'ru' ? 
                                        '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É' : 
                                        '–ú–∏–∫—Ä–æ—Ñ–æ–Ω“ì–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É –º“Ø–º–∫—ñ–Ω –±–æ–ª–º–∞–¥—ã');
                                });
                        } else {
                            speak(currentLanguage === 'ru' ? 
                                '–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É' : 
                                '–°—ñ–∑–¥—ñ“£ –±—Ä–∞—É–∑–µ—Ä—ñ“£—ñ–∑ –º–∏–∫—Ä–æ—Ñ–æ–Ω“ì–∞ “õ–æ–ª –∂–µ—Ç–∫—ñ–∑—É–¥—ñ “õ–æ–ª–¥–∞–º–∞–π–¥—ã');
                        }
                    } else {
                        setupVoiceRecognition();
                        startListening();
                    }
                }
            }

            function startListening() {
                if (recognition) {
                    try {
                        recognition.start();
                        isListening = true;
                    } catch (e) {
                        console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è:', e);
                    }
                }
            }

            function stopListening() {
                if (recognition) {
                    recognition.stop();
                    isListening = false;
                    voiceBtn.textContent = translations[currentLanguage].activateVoice;
                    document.body.classList.remove('listening');
                    speak(currentLanguage === 'ru' ? '–ì–æ–ª–æ—Å–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ' : '–î–∞—É—ã—Å—Ç—ã“õ –±–∞—Å“õ–∞—Ä—É ”©—à—ñ—Ä—ñ–ª–¥—ñ');
                }
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
            function showMainMenu() {
                mainMenu.style.display = 'grid';
                gameFuture.style.display = 'none';
                gameMath.style.display = 'none';
                gameGuess.style.display = 'none';
                gameMotor.style.display = 'none';
                gameProfession.style.display = 'none';
                settingsSection.style.display = 'none';
                currentGame = null;

                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –∏–≥—Ä—ã –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
                if (motorTimer) {
                    clearInterval(motorTimer);
                    motorTimer = null;
                }

                // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–≥—Ä
                futureNumbers = [];
                currentRound = 1;
                document.getElementById('future-results').classList.add('hidden');
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
            function showProfessionSelection() {
                programmerGame.classList.add('hidden');
                engineerGame.classList.add('hidden');
                designerGame.classList.add('hidden');
                programmerResults.classList.add('hidden');
                engineerResults.classList.add('hidden');
                designerResults.classList.add('hidden');
                document.querySelector('#game-profession .game-container').classList.remove('hidden');
            }

            // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
            function startGame(game) {
                mainMenu.style.display = 'none';
                currentGame = game;

                switch (game) {
                    case 'future':
                        gameFuture.style.display = 'block';
                        futureNumbers = [];
                        currentRound = 1;
                        updateRoundInfo();
                        updateRoundColors();
                        document.getElementById('future-results').classList.add('hidden');
                        speak(currentLanguage === 'ru' ? '–ò–≥—Ä–∞ "–û–ø—Ä–µ–¥–µ–ª–∏ —Å–≤–æ–µ –±—É–¥—É—â–µ–µ" –Ω–∞—á–∞–ª–∞—Å—å. –í—ã–±–µ—Ä–∏—Ç–µ —Ü–∏—Ñ—Ä—ã –æ—Ç –æ–¥–Ω–æ–≥–æ –¥–æ —Ç—Ä–µ—Ö.' : '"–ë–æ–ª–∞—à–∞“ì—ã–Ω–¥—ã –∞–Ω—ã“õ—Ç–∞" –æ–π—ã–Ω—ã –±–∞—Å—Ç–∞–ª–¥—ã. –ë—ñ—Ä–¥–µ–Ω “Ø—à–∫–µ –¥–µ–π—ñ–Ω–≥—ñ —Å–∞–Ω–¥–∞—Ä–¥—ã —Ç–∞“£–¥–∞“£—ã–∑.');
                        break;
                    case 'math':
                        gameMath.style.display = 'block';
                        generateMathProblem();
                        document.getElementById('math-answer').value = '';
                        document.getElementById('math-results').classList.add('hidden');
                        mathLeaderboard.classList.remove('hidden');
                        speak(currentLanguage === 'ru' ? '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –†–µ—à–∏—Ç–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É.' : '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –∫”©–º–µ–∫—à—ñ –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ª–¥—ñ. “∞—Å—ã–Ω—ã–ª“ì–∞–Ω –µ—Å–µ–ø—Ç—ñ —à–µ—à—ñ“£—ñ–∑.');
                        break;
                    case 'guess':
                        gameGuess.style.display = 'block';
                        startGuessGame();
                        speak(currentLanguage === 'ru' ? '–ò–≥—Ä–∞ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ" –Ω–∞—á–∞–ª–∞—Å—å. –Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç –æ–¥–Ω–æ–≥–æ –¥–æ —Å—Ç–∞.' : '"–°–∞–Ω–¥—ã —Ç–∞–ø" –æ–π—ã–Ω—ã –±–∞—Å—Ç–∞–ª–¥—ã. –ú–µ–Ω –±—ñ—Ä–¥–µ–Ω –∂“Ø–∑–≥–µ –¥–µ–π—ñ–Ω —Å–∞–Ω –æ–π–ª–∞–¥—ã–º.');
                        break;
                    case 'motor':
                        gameMotor.style.display = 'block';
                        motorResults.classList.add('hidden');
                        motorLeaderboard.classList.remove('hidden');
                        speak(currentLanguage === 'ru' ? '–ò–≥—Ä–∞ –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –º–æ—Ç–æ—Ä–∏–∫–∏ –Ω–∞—á–∞–ª–∞—Å—å. –ù–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –ø–æ—è–≤–ª—è—é—â–∏–µ—Å—è —Ü–µ–ª–∏.' : '–ú–æ—Ç–æ—Ä–∏–∫–∞–Ω—ã –¥–∞–º—ã—Ç—É –æ–π—ã–Ω—ã –±–∞—Å—Ç–∞–ª–¥—ã. –ü–∞–π–¥–∞ –±–æ–ª–∞—Ç—ã–Ω –Ω—ã—Å–∞–Ω–¥–∞—Ä–¥—ã –±–∞—Å—ã“£—ã–∑.');
                        break;
                    case 'profession':
                        gameProfession.style.display = 'block';
                        showProfessionSelection();
                        speak(currentLanguage === 'ru' ? '–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –Ω–µ–π.' : '”®–∑—ñ“£—ñ–∑–¥—ñ —Å—ã–Ω–∞–ø –∫”©—Ä—É “Ø—à—ñ–Ω –∫”ô—Å—ñ–ø —Ç–∞“£–¥–∞“£—ã–∑.');
                        break;
                    case 'settings':
                        settingsSection.style.display = 'block';
                        speak(currentLanguage === 'ru' ? '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≥–æ–ª–æ—Å–∞ –æ—Ç–∫—Ä—ã—Ç—ã.' : '–î–∞—É—ã—Å –±–∞–ø—Ç–∞—É–ª–∞—Ä—ã –∞—à—ã–ª–¥—ã.');
                        break;
                }
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –¥–ª—è —Ä–∞—É–Ω–¥–∞
            function updateRoundColors() {
                const numbers = document.querySelectorAll('.number');
                const colorClass = roundColors[currentRound - 1];
                
                numbers.forEach(number => {
                    // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ü–≤–µ—Ç–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã
                    number.classList.remove('number-1', 'number-2', 'number-3', 'number-4', 'number-5', 'number-6');
                    // –î–æ–±–∞–≤–ª—è–µ–º –Ω—É–∂–Ω—ã–π –∫–ª–∞—Å—Å
                    number.classList.add(colorClass);
                });
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —á–∏—Å–ª–∞ –≤ –∏–≥—Ä–µ "–ë—É–¥—É—â–µ–µ"
            function handleFutureNumberSelection(number) {
                if (currentRound <= 6) {
                    futureNumbers.push(number);
                    
                    // –ü—Ä–æ–∏–∑–Ω–æ—Å–∏–º –Ω–æ–º–µ—Ä
                    speak(number);
                    
                    // –ê–Ω–∏–º–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞
                    const selectedElement = document.querySelector(`[data-number="${number}"]`);
                    selectedElement.classList.add('pulse');
                    
                    setTimeout(() => {
                        selectedElement.classList.remove('pulse');
                        
                        if (currentRound < 6) {
                            currentRound++;
                            updateRoundInfo();
                            updateRoundColors();
                        } else {
                            // –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                            showFutureResults();
                        }
                    }, 1000);
                }
            }

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ä–∞—É–Ω–¥–µ
            function updateRoundInfo() {
                document.getElementById('round-info').textContent = 
                    translations[currentLanguage].roundInfo.replace('{round}', currentRound);
            }

            // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–≥—Ä—ã "–ë—É–¥—É—â–µ–µ"
            function showFutureResults() {
                const analysis = analyzeSelections(futureNumbers);
                const t = translations[currentLanguage];
                
                document.getElementById('mood-result').textContent = 
                    t.moodResult.replace('{mood}', analysis.mood);
                document.getElementById('job-result').textContent = 
                    t.jobResult.replace('{job}', analysis.job);
                
                document.getElementById('future-results').classList.remove('hidden');
                
                // –ü—Ä–æ–∏–∑–Ω–æ—Å–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                speak(t.moodResult.replace('{mood}', analysis.mood) + '. ' + t.jobResult.replace('{job}', analysis.job));
            }

            // –ê–Ω–∞–ª–∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —á–∏—Å–µ–ª –¥–ª—è –∏–≥—Ä—ã "–ë—É–¥—É—â–µ–µ"
            function analyzeSelections(selections) {
                // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—ã–±–æ—Ä—ã
                const counts = {
                    '1': selections.filter(s => s === '1').length,
                    '2': selections.filter(s => s === '2').length,
                    '3': selections.filter(s => s === '3').length
                };

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –≤—ã–±–∏—Ä–∞–µ–º—É—é —Ü–∏—Ñ—Ä—É
                const maxCount = Math.max(...Object.values(counts));
                const mostSelected = Object.keys(counts).find(key => counts[key] === maxCount);

                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—ã–±–æ—Ä–∞
                let mood, job;

                switch(mostSelected) {
                    case '1':
                        mood = currentLanguage === 'ru' ? '–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ –∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ' : '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞–ª—ã“õ –∂”ô–Ω–µ –ª–æ–≥–∏–∫–∞–ª—ã“õ';
                        job = currentLanguage === 'ru' ? '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –º–∞—Ç–µ–º–∞—Ç–∏–∫, –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö' : '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç, –º–∞—Ç–µ–º–∞—Ç–∏–∫, –¥–µ—Ä–µ–∫—Ç–µ—Ä –∞–Ω–∞–ª–∏—Ç–∏–≥—ñ';
                        break;
                    case '2':
                        mood = currentLanguage === 'ru' ? '–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ –∏ –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ' : '–®—ã“ì–∞—Ä–º–∞—à—ã–ª—ã“õ –∂”ô–Ω–µ —à–∞–±—ã—Ç—Ç–∞–Ω–¥—ã—Ä—ã–ª“ì–∞–Ω';
                        job = currentLanguage === 'ru' ? '–î–∏–∑–∞–π–Ω–µ—Ä, —Ö—É–¥–æ–∂–Ω–∏–∫, –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π –¥–∏—Ä–µ–∫—Ç–æ—Ä' : '–î–∏–∑–∞–π–Ω–µ—Ä, —Å—É—Ä–µ—Ç—à—ñ, –∫—Ä–µ–∞—Ç–∏–≤—Ç—ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä';
                        break;
                    case '3':
                        mood = currentLanguage === 'ru' ? '–ö–æ–º–º—É–Ω–∏–∫–∞—Ç–∏–≤–Ω–æ–µ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–µ' : '–ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–ª—ã“õ –∂”ô–Ω–µ ”ô–ª–µ—É–º–µ—Ç—Ç—ñ–∫';
                        job = currentLanguage === 'ru' ? '–ú–µ–Ω–µ–¥–∂–µ—Ä, —É—á–∏—Ç–µ–ª—å, –ø—Å–∏—Ö–æ–ª–æ–≥' : '–ú–µ–Ω–µ–¥–∂–µ—Ä, –º“±“ì–∞–ª—ñ–º, –ø—Å–∏—Ö–æ–ª–æ–≥';
                        break;
                    default:
                        mood = currentLanguage === 'ru' ? '–†–∞–∑–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ' : '–ê–ª—É–∞–Ω —Ç“Ø—Ä–ª—ñ –∂”ô–Ω–µ –±–µ–π—ñ–º–¥–µ–ª–≥—ñ—à';
                        job = currentLanguage === 'ru' ? '–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç, –∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç' : '–£–Ω–∏–≤–µ—Ä—Å–∞–ª –º–∞–º–∞–Ω, –∫–µ“£–µ—Å—à—ñ';
                }

                return { mood, job };
            }

            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–¥–∞—á–∏
            function generateMathProblem() {
                let a, b, op, problem, answer;

                if (mathDifficulty === 'easy') {
                    a = Math.floor(Math.random() * 10) + 1;
                    b = Math.floor(Math.random() * 10) + 1;
                    op = ['+', '-'][Math.floor(Math.random() * 2)];
                } else if (mathDifficulty === 'medium') {
                    a = Math.floor(Math.random() * 25) + 1;
                    b = Math.floor(Math.random() * 25) + 1;
                    op = ['+', '-', '*'][Math.floor(Math.random() * 3)];
                } else {
                    a = Math.floor(Math.random() * 100) + 1;
                    b = Math.floor(Math.random() * 100) + 1;
                    const operations = ['+', '-', '*'];
                    op = operations[Math.floor(Math.random() * operations.length)];
                }

                switch(op) {
                    case '+':
                        problem = `${a} + ${b} = ?`;
                        answer = a + b;
                        break;
                    case '-':
                        problem = `${a} - ${b} = ?`;
                        answer = a - b;
                        break;
                    case '*':
                        problem = `${a} √ó ${b} = ?`;
                        answer = a * b;
                        break;
                }

                document.getElementById('math-problem').textContent = problem;
                mathAnswer = answer;
                document.getElementById('math-results').classList.add('hidden');
                
                // –û–∑–≤—É—á–∏–≤–∞–µ–º –∑–∞–¥–∞—á—É
                speak(currentLanguage === 'ru' ? 
                    `–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç ${a} ${op === '*' ? '—É–º–Ω–æ–∂–∏—Ç—å –Ω–∞' : op} ${b}?` : 
                    `${a} ${op} ${b} –Ω–µ—à–µ –±–æ–ª–∞–¥—ã?`);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
            function checkMathAnswer() {
                const userAnswer = parseInt(document.getElementById('math-answer').value);
                const resultDiv = document.getElementById('math-result');

                if (userAnswer === mathAnswer) {
                    resultDiv.textContent = currentLanguage === 'ru' ? 
                        '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!' : '–î“±—Ä—ã—Å! –ñ–∞—Ä–∞–π—Å—ã“£!';
                    speak(currentLanguage === 'ru' ? '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –ú–æ–ª–æ–¥–µ—Ü!' : '–î“±—Ä—ã—Å! –ñ–∞—Ä–∞–π—Å—ã“£!');
                    
                    // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç
                    mathScore += mathDifficulty === 'easy' ? 1 : mathDifficulty === 'medium' ? 2 : 3;
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –µ—Å–ª–∏ –Ω–∞–±—Ä–∞–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∫–æ–≤
                    if (mathScore >= 10) {
                        saveScore('math', mathDifficulty, mathScore);
                        mathScore = 0;
                    }
                } else {
                    resultDiv.textContent = currentLanguage === 'ru' ? 
                        `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${mathAnswer}` : 
                        `“ö–∞—Ç–µ. –î“±—Ä—ã—Å –∂–∞—É–∞–ø: ${mathAnswer}`;
                    speak(currentLanguage === 'ru' ? 
                        `–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${mathAnswer}` : 
                        `“ö–∞—Ç–µ. –î“±—Ä—ã—Å –∂–∞—É–∞–ø: ${mathAnswer}`);
                    
                    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ
                    mathScore = 0;
                }

                document.getElementById('math-results').classList.remove('hidden');
                
                // –ß–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
                setTimeout(() => {
                    generateMathProblem();
                    document.getElementById('math-answer').value = '';
                }, 2000);
            }

            // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
            function startGuessGame() {
                guessNumber = Math.floor(Math.random() * 100) + 1;
                guessAttempts = 0;
                document.getElementById('guess-input').value = '';
                
                const t = translations[currentLanguage];
                document.getElementById('guess-feedback').textContent = t.guessFeedback;
                
                speak(currentLanguage === 'ru' ? 
                    '–Ø –∑–∞–≥–∞–¥–∞–ª —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100. –ü–æ–ø—Ä–æ–±—É–π —É–≥–∞–¥–∞—Ç—å!' : 
                    '–ú–µ–Ω 1-–¥–µ–Ω 100-–≥–µ –¥–µ–π—ñ–Ω —Å–∞–Ω –æ–π–ª–∞–¥—ã–º. –û–Ω—ã —Ç–∞–ø“õ—ã“£ –∫–µ–ª—Å–µ!');
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∏—Å–ª–∞ –≤ –∏–≥—Ä–µ "–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ"
            function checkGuess() {
                const userGuess = parseInt(document.getElementById('guess-input').value);
                const feedbackDiv = document.getElementById('guess-feedback');
                const t = translations[currentLanguage];

                if (isNaN(userGuess) || userGuess < 1 || userGuess > 100) {
                    feedbackDiv.textContent = currentLanguage === 'ru' ? 
                        '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100' : 
                        '1-–¥–µ–Ω 100-–≥–µ –¥–µ–π—ñ–Ω–≥—ñ —Å–∞–Ω–¥—ã –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑';
                    return;
                }

                guessAttempts++;

                if (userGuess === guessNumber) {
                    feedbackDiv.textContent = t.guessSuccess
                        .replace('{number}', guessNumber)
                        .replace('{attempts}', guessAttempts);
                    
                    speak(t.guessSuccess
                        .replace('{number}', guessNumber)
                        .replace('{attempts}', guessAttempts));
                } else if (userGuess < guessNumber) {
                    feedbackDiv.textContent = t.guessHigher;
                    speak(t.guessHigher);
                } else {
                    feedbackDiv.textContent = t.guessLower;
                    speak(t.guessLower);
                }
            }

            // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
            function startMotorGame() {
                // –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
                motorGameContainer.innerHTML = '';
                motorScore = 0;
                motorTargets = 0;
                targetsClicked = 0;

                // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                if (motorDifficulty === 'easy') {
                    motorTime = 30;
                } else if (motorDifficulty === 'medium') {
                    motorTime = 45;
                } else {
                    motorTime = 60;
                }

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                const t = translations[currentLanguage];
                scoreElement.textContent = t.score.replace('{score}', motorScore);
                timeElement.textContent = t.time.replace('{time}', motorTime);
                targetsElement.textContent = t.targets.replace('{targets}', motorTargets);

                // –°–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                motorResults.classList.add('hidden');

                // –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–∞
                if (motorTimer) {
                    clearInterval(motorTimer);
                }

                motorTimer = setInterval(() => {
                    motorTime--;
                    timeElement.textContent = t.time.replace('{time}', motorTime);

                    if (motorTime <= 0) {
                        endMotorGame();
                    }
                }, 1000);

                // –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö —Ü–µ–ª–µ–π
                createTarget();
                createTarget();

                // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                startMotorBtn.textContent = currentLanguage === 'ru' ? '–ü–µ—Ä–µ–∑–∞–ø—É—Å–∫' : '“ö–∞–π—Ç–∞ –±–∞—Å—Ç–∞—É';
                speak(currentLanguage === 'ru' ? '–ò–≥—Ä–∞ –Ω–∞—á–∞–ª–∞—Å—å! –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –º–∏—à–µ–Ω—è–º!' : '–û–π—ã–Ω –±–∞—Å—Ç–∞–ª–¥—ã! –ù—ã—Å–∞–Ω–¥–∞—Ä–¥—ã –±–∞—Å—ã“£—ã–∑!');
            }

            // –°–æ–∑–¥–∞–Ω–∏–µ —Ü–µ–ª–∏ –≤ –∏–≥—Ä–µ –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
            function createTarget() {
                const target = document.createElement('div');
                target.classList.add('target');

                // –°–ª—É—á–∞–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ
                const maxX = motorGameContainer.offsetWidth - 60;
                const maxY = motorGameContainer.offsetHeight - 60;
                const x = Math.floor(Math.random() * maxX);
                const y = Math.floor(Math.random() * maxY);

                target.style.left = `${x}px`;
                target.style.top = `${y}px`;

                // –†–∞–∑–º–µ—Ä –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                let size;
                if (motorDifficulty === 'easy') {
                    size = 60 + Math.floor(Math.random() * 20); // 60-80px
                } else if (motorDifficulty === 'medium') {
                    size = 40 + Math.floor(Math.random() * 30); // 40-70px
                } else {
                    size = 30 + Math.floor(Math.random() * 30); // 30-60px
                }

                target.style.width = `${size}px`;
                target.style.height = `${size}px`;

                // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                motorGameContainer.appendChild(target);

                // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ —Ü–µ–ª–µ–π
                motorTargets++;
                const t = translations[currentLanguage];
                targetsElement.textContent = t.targets.replace('{targets}', motorTargets);

                // –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ü–µ–ª–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                let lifetime;
                if (motorDifficulty === 'easy') {
                    lifetime = 2000 + Math.random() * 2000; // 2-4 —Å–µ–∫—É–Ω–¥—ã
                } else if (motorDifficulty === 'medium') {
                    lifetime = 1500 + Math.random() * 1500; // 1.5-3 —Å–µ–∫—É–Ω–¥—ã
                } else {
                    lifetime = 1000 + Math.random() * 1000; // 1-2 —Å–µ–∫—É–Ω–¥—ã
                }

                // –£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ª–∏ —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è, –µ—Å–ª–∏ –Ω–µ –Ω–∞–∂–∞—Ç–∞
                setTimeout(() => {
                    if (target.parentNode) {
                        motorGameContainer.removeChild(target);
                        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ü–µ–ª–∏
                        if (motorTime > 0) {
                            createTarget();
                        }
                    }
                }, lifetime);
            }

            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞ –ø–æ —Ü–µ–ª–∏
            function handleTargetClick(target) {
                // –£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–ª–∏
                motorGameContainer.removeChild(target);

                // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ (–±–æ–ª—å—à–µ –æ—á–∫–æ–≤ –∑–∞ –º–µ–Ω—å—à–∏–µ —Ü–µ–ª–∏ –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏)
                const size = parseInt(target.style.width);
                let pointsMultiplier = 1;
                if (motorDifficulty === 'medium') pointsMultiplier = 1.5;
                if (motorDifficulty === 'hard') pointsMultiplier = 2;

                const points = Math.floor((100 - size) * pointsMultiplier);
                motorScore += points;
                targetsClicked++;

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
                const t = translations[currentLanguage];
                scoreElement.textContent = t.score.replace('{score}', motorScore);

                // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ü–µ–ª–∏
                if (motorTime > 0) {
                    createTarget();
                }
            }

            // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã –Ω–∞ –º–æ—Ç–æ—Ä–∏–∫—É
            function endMotorGame() {
                // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞
                if (motorTimer) {
                    clearInterval(motorTimer);
                    motorTimer = null;
                }

                // –£–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Ü–µ–ª–µ–π
                motorGameContainer.innerHTML = '';

                // –†–∞—Å—á–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏
                const accuracy = motorTargets > 0 ? Math.floor((targetsClicked / motorTargets) * 100) : 0;

                // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                const t = translations[currentLanguage];
                finalScoreElement.textContent = t.finalScore.replace('{score}', motorScore);
                accuracyElement.textContent = t.accuracy.replace('{accuracy}', accuracy);
                motorResults.classList.remove('hidden');

                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
                saveScore('motor', motorDifficulty, motorScore);

                // –ü—Ä–æ–∏–∑–Ω–µ—Å–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                speak(
                    currentLanguage === 'ru' ? 
                    `–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –í—ã –Ω–∞–±—Ä–∞–ª–∏ ${motorScore} –æ—á–∫–æ–≤ —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é ${accuracy} –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤` : 
                    `–û–π—ã–Ω –∞—è“õ—Ç–∞–ª–¥—ã! –°—ñ–∑ ${motorScore} “±–ø–∞–π –∂–∏–Ω–∞–¥—ã“£—ã–∑, –¥”ô–ª–¥—ñ–∫ ${accuracy} –ø–∞–π—ã–∑`
                );

                // –í–æ–∑–≤—Ä–∞—Ç —Ç–µ–∫—Å—Ç–∞ –∫–Ω–æ–ø–∫–∏
                startMotorBtn.textContent = t.startGame;
            }

            // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã –ø–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º
            function startProfessionGame(profession) {
                currentProfession = profession;
                const t = translations[currentLanguage];

                // –°–∫—Ä—ã–≤–∞–µ–º –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–≥—Ä—É
                document.querySelector('#game-profession .game-container').classList.add('hidden');
                
                // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–¥—Å–∫–∞–∑–∫–∏
                hintsUsed = 0;
                hintButtons.forEach(btn => {
                    btn.disabled = false;
                });

                // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∏–≥—Ä—É –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏
                if (profession === 'programmer') {
                    programmerGame.classList.remove('hidden');
                    programmerResults.classList.add('hidden');
                    
                    document.getElementById('profession-description').innerHTML = `
                        <h3>${t.programmer}</h3>
                        <p>–°–æ–±–µ—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞!</p>
                    `;

                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
                    codePieces = [
                        'function calculateSum(a, b) {',
                        '  return a + b;',
                        '}',
                        'const result = calculateSum(5, 3);',
                        'console.log(result);'
                    ];

                    correctCode = [0, 1, 2, 3, 4];

                    // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –∫–æ–¥–∞
                    const shuffledPieces = [...codePieces].sort(() => Math.random() - 0.5);

                    // –û—á–∏—â–∞–µ–º –∏ –∑–∞–ø–æ–ª–Ω—è–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã
                    codeOptions.innerHTML = '';
                    shuffledPieces.forEach((piece, index) => {
                        const option = document.createElement('div');
                        option.className = 'code-option';
                        option.textContent = piece;
                        option.dataset.option = codePieces.indexOf(piece);
                        codeOptions.appendChild(option);
                    });

                    // –û—á–∏—â–∞–µ–º –±–ª–æ–∫ –∫–æ–¥–∞
                    codeBlock.textContent = '// –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞';

                    speak(currentLanguage === 'ru' ? 
                        '–ò–≥—Ä–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞.' : 
                        '–ü—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –æ–π—ã–Ω—ã. –ö–æ–¥—Ç—ã“£ –¥“±—Ä—ã—Å —Ç—ñ–∑–±–µ–≥—ñ–Ω –∂–∏–Ω–∞“£—ã–∑.');

                } else if (profession === 'engineer') {
                    engineerGame.classList.remove('hidden');
                    engineerResults.classList.add('hidden');
                    
                    document.getElementById('profession-description').innerHTML = `
                        <h3>${t.engineer}</h3>
                        <p>–°–æ–±–µ—Ä–∏ –º–µ—Ö–∞–Ω–∏–∑–º –∏–∑ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π!</p>
                    `;

                    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–∞
                    setupEngineerGame();
                    speak(currentLanguage === 'ru' ? 
                        '–ò–≥—Ä–∞ –∏–Ω–∂–µ–Ω–µ—Ä–∞. –°–æ–±–µ—Ä–∏—Ç–µ –º–µ—Ö–∞–Ω–∏–∑–º –∏–∑ –¥–µ—Ç–∞–ª–µ–π.' : 
                        '–ò–Ω–∂–µ–Ω–µ—Ä –æ–π—ã–Ω—ã. –ë”©–ª—à–µ–∫—Ç–µ—Ä–¥–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –∂–∏–Ω–∞“£—ã–∑.');

                } else if (profession === 'designer') {
                    designerGame.classList.remove('hidden');
                    designerResults.classList.add('hidden');
                    
                    document.getElementById('profession-description').innerHTML = `
                        <h3>${t.designer}</h3>
                        <p>–°–æ–∑–¥–∞–π –∫—Ä–∞—Å–∏–≤—É—é —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É!</p>
                    `;

                    // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–∞
                    setupDesignerGame();
                    speak(currentLanguage === 'ru' ? 
                        '–ò–≥—Ä–∞ –¥–∏–∑–∞–π–Ω–µ—Ä–∞. –°–æ–∑–¥–∞–π—Ç–µ –≥–∞—Ä–º–æ–Ω–∏—á–Ω—É—é —Ü–≤–µ—Ç–æ–≤—É—é –ø–∞–ª–∏—Ç—Ä—É.' : 
                        '–î–∏–∑–∞–π–Ω–µ—Ä –æ–π—ã–Ω—ã. “Æ–π–ª–µ—Å—ñ–º–¥—ñ —Ç“Ø—Å –ø–∞–ª–∏—Ç—Ä–∞—Å—ã–Ω –∂–∞—Å–∞“£—ã–∑.');
                }

                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∫–æ–¥–∞
                const codeOptionElements = document.querySelectorAll('.code-option');
                codeOptionElements.forEach(option => {
                    option.addEventListener('click', function() {
                        const selectedOption = parseInt(this.dataset.option);
                        addCodePiece(selectedOption);
                    });
                });
            }

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä—ã –∏–Ω–∂–µ–Ω–µ—Ä–∞
            function setupEngineerGame() {
                const engineerParts = document.querySelectorAll('.engineer-part');
                const engineerCanvas = document.getElementById('engineer-canvas');
                
                engineerParts.forEach(part => {
                    part.addEventListener('click', function() {
                        const partType = this.dataset.part;
                        addPartToCanvas(partType);
                    });
                });

                // –û—á–∏—â–∞–µ–º canvas
                engineerCanvas.innerHTML = '';
            }

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏ –≤ –∏–≥—Ä–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞
            function addPartToCanvas(partType) {
                const engineerCanvas = document.getElementById('engineer-canvas');
                const part = document.createElement('div');
                part.className = 'constructed-item';
                part.innerHTML = document.querySelector(`[data-part="${partType}"]`).innerHTML;
                part.style.position = 'absolute';
                part.style.left = `${Math.random() * 80}%`;
                part.style.top = `${Math.random() * 80}%`;
                
                engineerCanvas.appendChild(part);
                speak(currentLanguage === 'ru' ? 
                    `–î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–µ—Ç–∞–ª—å: ${partType}` : 
                    `–ë”©–ª—à–µ–∫ “õ–æ—Å—ã–ª–¥—ã: ${partType}`);
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–Ω–∂–µ–Ω–µ—Ä–∞
            function checkConstruction() {
                const engineerCanvas = document.getElementById('engineer-canvas');
                const parts = engineerCanvas.querySelectorAll('.constructed-item');
                
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ - –µ—Å–ª–∏ —Å–æ–±—Ä–∞–Ω–æ —Ö–æ—Ç—è –±—ã 3 –¥–µ—Ç–∞–ª–∏
                const score = Math.min(100, Math.floor(parts.length / 5 * 100));
                professionScores.engineer = score;
                
                const t = translations[currentLanguage];
                engineerScore.textContent = t.moodResult.replace('{mood}', `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score}%`);
                engineerFeedback.textContent = t.professionResult
                    .replace('{profession}', t.engineer)
                    .replace('{percentage}', score);
                
                engineerResults.classList.remove('hidden');
                
                speak(currentLanguage === 'ru' ? 
                    `–í—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤ –∏–≥—Ä–µ –∏–Ω–∂–µ–Ω–µ—Ä–∞.` : 
                    `–°—ñ–∑ –∏–Ω–∂–µ–Ω–µ—Ä –æ–π—ã–Ω—ã–Ω–¥–∞ ${score} –ø–∞–π—ã–∑ –∂–∏–Ω–∞–¥—ã“£—ã–∑.`);
            }

            // –°–±—Ä–æ—Å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–Ω–∂–µ–Ω–µ—Ä–∞
            function resetConstruction() {
                const engineerCanvas = document.getElementById('engineer-canvas');
                engineerCanvas.innerHTML = '';
                engineerResults.classList.add('hidden');
                speak(currentLanguage === 'ru' ? '–ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–±—Ä–æ—à–µ–Ω–∞' : '“ö“±—Ä—ã–ª—ã–º “õ–∞–ª–ø—ã–Ω–∞ –∫–µ–ª—Ç—ñ—Ä—ñ–ª–¥—ñ');
            }

            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–≥—Ä—ã –¥–∏–∑–∞–π–Ω–µ—Ä–∞
            function setupDesignerGame() {
                const colorBoxes = document.querySelectorAll('.color-box');
                const designElements = document.querySelectorAll('.design-element');
                
                colorBoxes.forEach(box => {
                    box.addEventListener('click', function() {
                        const color = this.dataset.color;
                        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –∫ –ø–µ—Ä–≤–æ–º—É –Ω–µ–æ–∫—Ä–∞—à–µ–Ω–Ω–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É
                        applyColorToElement(color);
                        speak(currentLanguage === 'ru' ? 
                            `–í—ã–±—Ä–∞–Ω —Ü–≤–µ—Ç ${color}` : 
                            `–¢“Ø—Å —Ç–∞“£–¥–∞–ª–¥—ã ${color}`);
                    });
                });

                // –î–µ–ª–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–µ–º—ã–º–∏
                designElements.forEach(element => {
                    element.setAttribute('draggable', 'true');
                    
                    element.addEventListener('dragstart', function(e) {
                        e.dataTransfer.setData('text/plain', this.textContent);
                    });
                });

                const designContainer = document.getElementById('design-container');
                designContainer.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });

                designContainer.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const data = e.dataTransfer.getData('text/plain');
                    // –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
                });
            }

            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–≤–µ—Ç–∞ –∫ —ç–ª–µ–º–µ–Ω—Ç—É
            function applyColorToElement(color) {
                const designElements = document.querySelectorAll('.design-element');
                for (let element of designElements) {
                    if (!element.style.backgroundColor || element.style.backgroundColor === 'rgba(255, 255, 255, 0.2)') {
                        element.style.backgroundColor = color;
                        break;
                    }
                }
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∑–∞–π–Ω–∞
            function checkDesign() {
                const designElements = document.querySelectorAll('.design-element');
                let coloredCount = 0;
                
                designElements.forEach(element => {
                    if (element.style.backgroundColor && element.style.backgroundColor !== 'rgba(255, 255, 255, 0.2)') {
                        coloredCount++;
                    }
                });
                
                const score = Math.min(100, Math.floor(coloredCount / designElements.length * 100));
                professionScores.designer = score;
                
                const t = translations[currentLanguage];
                designerScore.textContent = t.moodResult.replace('{mood}', `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score}%`);
                designerFeedback.textContent = t.professionResult
                    .replace('{profession}', t.designer)
                    .replace('{percentage}', score);
                
                designerResults.classList.remove('hidden');
                
                speak(currentLanguage === 'ru' ? 
                    `–í—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –≤ –∏–≥—Ä–µ –¥–∏–∑–∞–π–Ω–µ—Ä–∞.` : 
                    `–°—ñ–∑ –¥–∏–∑–∞–π–Ω–µ—Ä –æ–π—ã–Ω—ã–Ω–¥–∞ ${score} –ø–∞–π—ã–∑ –∂–∏–Ω–∞–¥—ã“£—ã–∑.`);
            }

            // –°–±—Ä–æ—Å –¥–∏–∑–∞–π–Ω–∞
            function resetDesign() {
                const designElements = document.querySelectorAll('.design-element');
                designElements.forEach(element => {
                    element.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                });
                designerResults.classList.add('hidden');
                speak(currentLanguage === 'ru' ? '–î–∏–∑–∞–π–Ω —Å–±—Ä–æ—à–µ–Ω' : '–î–∏–∑–∞–π–Ω “õ–∞–ª–ø—ã–Ω–∞ –∫–µ–ª—Ç—ñ—Ä—ñ–ª–¥—ñ');
            }

            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç–∏ –∫–æ–¥–∞ –≤ –∏–≥—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
            function addCodePiece(index) {
                const currentCode = codeBlock.textContent;
                
                if (currentCode.includes('// –í—ã–±–µ—Ä–∏—Ç–µ')) {
                    codeBlock.textContent = codePieces[index];
                } else {
                    codeBlock.textContent += '\n' + codePieces[index];
                }
                
                speak(currentLanguage === 'ru' ? 
                    `–î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –∫–æ–¥–∞: ${codePieces[index]}` : 
                    `–ö–æ–¥ –∂–æ–ª—ã “õ–æ—Å—ã–ª–¥—ã: ${codePieces[index]}`);
            }

            // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
            function useHint(hintIndex) {
                if (hintsUsed >= maxHints) {
                    speak(currentLanguage === 'ru' ? 
                        '–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å' : 
                        '–ö”©—Ä—Å–µ—Ç—É–ª–µ—Ä –∞—è“õ—Ç–∞–ª–¥—ã');
                    return;
                }

                hintsUsed++;
                hintButtons[hintIndex].disabled = true;

                // –ü–æ–ª—É—á–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é –ø—Ä–∞–≤–∏–ª—å–Ω—É—é —á–∞—Å—Ç—å –∫–æ–¥–∞
                const currentCode = codeBlock.textContent.split('\n');
                const nextCorrectIndex = currentCode.length - (currentCode[0].includes('//') ? 1 : 0);
                
                if (nextCorrectIndex < correctCode.length) {
                    const nextStep = correctCode[nextCorrectIndex];
                    const hintMessage = translations[currentLanguage].hintMessage
                        .replace('{step}', codePieces[nextStep]);
                    
                    speak(hintMessage);
                } else {
                    speak(currentLanguage === 'ru' ? 
                        '–ö–æ–¥ —É–∂–µ —Å–æ–±—Ä–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ' : 
                        '–ö–æ–¥ ”ô–ª–¥–µ“õ–∞–∑–∞–Ω –¥“±—Ä—ã—Å –∂–∏–Ω–∞–ª“ì–∞–Ω');
                }
            }

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –≤ –∏–≥—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
            function checkCode() {
                const currentCode = codeBlock.textContent;
                const lines = currentCode.split('\n').filter(line => line.trim() !== '');
                
                let isCorrect = true;
                for (let i = 0; i < correctCode.length; i++) {
                    if (lines[i] !== codePieces[correctCode[i]]) {
                        isCorrect = false;
                        break;
                    }
                }

                const score = isCorrect ? 100 : Math.max(0, 100 - (hintsUsed * 20));
                professionScores.programmer = score;
                
                const t = translations[currentLanguage];
                programmerScore.textContent = t.moodResult.replace('{mood}', `–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score}%`);
                
                if (isCorrect) {
                    programmerFeedback.textContent = t.professionResult
                        .replace('{profession}', t.programmer)
                        .replace('{percentage}', score);
                    speak(currentLanguage === 'ru' ? 
                        '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç!' : 
                        '–î“±—Ä—ã—Å! –¢–∞–º–∞—à–∞ –∂“±–º—ã—Å, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç!');
                } else {
                    programmerFeedback.textContent = t.failure;
                    speak(currentLanguage === 'ru' ? 
                        '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.' : 
                        '“ö–∞—Ç–µ. –¢–∞“ì—ã –±–∞–π“õ–∞–ø –∫”©—Ä—ñ“£—ñ–∑.');
                }

                programmerResults.classList.remove('hidden');
            }

            // –°–±—Ä–æ—Å –∫–æ–¥–∞ –≤ –∏–≥—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞
            function resetCode() {
                codeBlock.textContent = '// –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞';
                hintsUsed = 0;
                hintButtons.forEach(btn => {
                    btn.disabled = false;
                });
                programmerResults.classList.add('hidden');
                speak(currentLanguage === 'ru' ? '–ö–æ–¥ —Å–±—Ä–æ—à–µ–Ω' : '–ö–æ–¥ “õ–∞–ª–ø—ã–Ω–∞ –∫–µ–ª—Ç—ñ—Ä—ñ–ª–¥—ñ');
            }

            // –§—É–Ω–∫—Ü–∏—è —Å–∏–Ω—Ç–µ–∑–∞ —Ä–µ—á–∏
            function speak(text) {
                if (!synthesis || isMuted) return;

                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ª—é–±–æ–µ —Ç–µ–∫—É—â–µ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ
                synthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = currentLanguage === 'ru' ? 'ru-RU' : 'kk-KZ';

                // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ localStorage
                utterance.rate = parseFloat(localStorage.getItem('speechSpeed') || 1);
                utterance.pitch = parseFloat(localStorage.getItem('speechPitch') || 1);
                utterance.volume = parseFloat(localStorage.getItem('speechVolume') || 1);

                // –í—ã–±–æ—Ä –≥–æ–ª–æ—Å–∞, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
                const selectedVoice = localStorage.getItem('selectedVoice');
                if (selectedVoice) {
                    const voices = synthesis.getVoices();
                    const voice = voices.find(v => v.name === selectedVoice);
                    if (voice) {
                        utterance.voice = voice;
                    }
                }

                synthesis.speak(utterance);
            }

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            init();
        });
    </script>
</body>
</html>
